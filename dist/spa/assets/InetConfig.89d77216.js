import{c as R,h as C,Q as L,f as M}from"./QBtn.63ed01e8.js";import{Q as F,a as j,b as V,c as B,d as G,e as H}from"./QCard.f600cb51.js";import{Q as J,a as N,b as K,c as U,d as Y}from"./QPage.e1056799.js";import{Y as Z,c as x,h as I,g as z,_ as W,D as T,Z as X,r as n,B as ee,$ as ae,E as A,F as P,G as d,H as l,R as $,a0 as h,J as le,K as te,o as se}from"./index.22b573f7.js";import{a as w}from"./axios.a596eead.js";import{a as oe,d as re}from"./QItem.761b44a8.js";const E=Z("subsciber",{state:()=>({subscriberDetail:{subscriber_name:"",serial_number:"",acc_no:"",package_type:"",ssid:"",password:"",mode:"",olt_ip:"",olt_interface:""},modalIsOpen:!1,subscribercolumns:[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"acc_no",label:"Account No.",field:"acc_no",align:"left",sortable:!0},{name:"subscriber_name",label:"Subscriber Name",field:"subscriber_name",align:"left",sortable:!0},{name:"serial_number",label:"Serial Number",field:"serial_number",align:"left",sortable:!0},{name:"package_type",label:"Package Type",field:"package_type",align:"left",sortable:!0},{name:"olt_ip",label:"OLT IP",field:"olt_ip",align:"left",sortable:!0},{name:"olt_interface",label:"OLT Interface",field:"olt_interface",align:"left",sortable:!0},{name:"mode",label:"Mode",field:"mode",align:"left",sortable:!0},{name:"ssid",label:"SSID",field:"ssid",align:"left",sortable:!0},{name:"password",label:"Password",field:"password",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}]})});var ne=R({name:"QBanner",props:{...oe,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(p,{slots:r}){const{proxy:{$q:s}}=z(),v=re(p,s),f=x(()=>"q-banner row items-center"+(p.dense===!0?" q-banner--dense":"")+(v.value===!0?" q-banner--dark q-dark":"")+(p.rounded===!0?" rounded-borders":"")),u=x(()=>`q-banner__actions row items-center justify-end col-${p.inlineActions===!0?"auto":"all"}`);return()=>{const c=[I("div",{class:"q-banner__avatar col-auto row items-center self-start"},C(r.avatar)),I("div",{class:"q-banner__content col text-body2"},C(r.default))],t=C(r.action);return t!==void 0&&c.push(I("div",{class:u.value},t)),I("div",{class:f.value+(p.inlineActions===!1&&t!==void 0?" q-banner--top-padding":""),role:"alert"},c)}}});const ie={class:""},de={class:""},ue={class:"q-gutter-sm"},q="127.0.0.1:8000",O="serverIp",ce=T({__name:"SubscriberModal",props:["dataId","getSubsribers"],setup(p){const r=p,s=E(),{dataId:v}=X(r),f=n(""),u=n(""),c=n(""),t=n(""),i=n(""),m=n(""),b=n(""),_=n(""),g=n(""),S=n(!0),o=ee({subscriber:"",configureSsid:"",setBandwidth:"",runAnsible:"",wanConfig:""});ae(()=>{f.value=s.$state.subscriberDetail.acc_no,u.value=s.$state.subscriberDetail.subscriber_name,c.value=s.$state.subscriberDetail.package_type,t.value=s.$state.subscriberDetail.serial_number,i.value=s.$state.subscriberDetail.olt_ip,m.value=s.$state.subscriberDetail.olt_interface,b.value=s.$state.subscriberDetail.mode,_.value=s.$state.subscriberDetail.ssid,g.value=s.$state.subscriberDetail.password});const y=["0/1:1","0/1:2","0/1:3","0/2:1","0/2:2","0/2:3","0/3:1","0/3:2","0/3:3"],D=()=>{s.$state.modalIsOpen=!s.$state.modalIsOpen},k=async Q=>{await w.put(`http://${q}/api/subscriber_test/${Q}/edit`,{acc_no:f.value,subscriber_name:u.value,serial_number:t.value,olt_ip:i.value,olt_interface:m.value,package_type:c.value,mode:b.value,ssid:_.value,password:g.value}).then(e=>{o.subscriber=e.data,r.getSubsribers()}).catch(e=>{o.subscriber=e}),await w.post(`http://${O}/configureSSID`,{SN:t.value,NewSSID:_.value,Password:g.value}).then(e=>{o.configureSsid=e.data}).catch(e=>{o.configureSsid=e}),await w.post("http://"+q+"/api/setBandwidth").then(e=>{if(e.data)o.setBandwidth="Bandwidth Config Success!";else throw new Error("Something went wrong!")}).catch(e=>{o.setBandwidth=e}),await w.post(`http://${O}/wanConfig`,{SN:t.value}).then(e=>{o.wanConfig=e.data}).catch(e=>{o.wanConfig=e}),await w.post("https//"+q+"/api/run-ansible").then(e=>{if(e.data)o.runAnsible="Successfull Setup!";else throw new Error("Something went wrong!")}).catch(e=>{o.runAnsible=e})};return(Q,e)=>(A(),P(U,null,{default:d(()=>[l(J,{modelValue:$(s).$state.modalIsOpen,"onUpdate:modelValue":e[12]||(e[12]=a=>$(s).$state.modalIsOpen=a),modelModifiers:{trim:!0}},{default:d(()=>[l(F,null,{default:d(()=>[l(j,{class:"flex-subscriber"},{default:d(()=>[h("div",ie,[l(V,{modelValue:f.value,"onUpdate:modelValue":e[0]||(e[0]=a=>f.value=a),modelModifiers:{trim:!0},outlined:"",label:"Account No.",class:"q-ma-md",disable:""},null,8,["modelValue"]),l(V,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=a=>u.value=a),modelModifiers:{trim:!0},outlined:"",label:"Subscriber Name",class:"q-ma-md",disable:""},null,8,["modelValue"]),l(V,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=a=>c.value=a),modelModifiers:{trim:!0},outlined:"",label:"Package Type",class:"q-ma-md",disable:""},null,8,["modelValue"]),l(V,{modelValue:t.value,"onUpdate:modelValue":e[3]||(e[3]=a=>t.value=a),modelModifiers:{trim:!0},outlined:"",label:"Serial Number",class:"q-ma-md"},null,8,["modelValue"]),l(N,{modelValue:i.value,"onUpdate:modelValue":e[4]||(e[4]=a=>i.value=a),modelModifiers:{trim:!0},filled:"",options:["172.16.0.2","172.16.0.58","172.16.0.22"],label:"OLT IP",class:"q-ma-md"},null,8,["modelValue"])]),h("div",de,[l(N,{modelValue:m.value,"onUpdate:modelValue":e[5]||(e[5]=a=>m.value=a),modelModifiers:{trim:!0},filled:"",options:y,label:"OLT Interface",class:"q-ma-md"},null,8,["modelValue"]),l(K,{filled:"",label:"Mode","stack-label":"",class:"q-ma-md"},{control:d(()=>[h("div",ue,[l(B,{modelValue:b.value,"onUpdate:modelValue":e[6]||(e[6]=a=>b.value=a),modelModifiers:{trim:!0},dense:"",val:"Bridged",label:"Bridged"},null,8,["modelValue"]),l(B,{modelValue:b.value,"onUpdate:modelValue":e[7]||(e[7]=a=>b.value=a),modelModifiers:{trim:!0},dense:"",val:"Routed",label:"Routed"},null,8,["modelValue"])])]),_:1}),l(V,{modelValue:_.value,"onUpdate:modelValue":e[8]||(e[8]=a=>_.value=a),modelModifiers:{trim:!0},outlined:"",class:"q-ma-md",label:"SSID"},null,8,["modelValue"]),l(V,{modelValue:g.value,"onUpdate:modelValue":e[10]||(e[10]=a=>g.value=a),modelModifiers:{trim:!0},outlined:"",class:"q-ma-md",label:"Password",type:S.value?"password":"text"},{append:d(()=>[l(L,{name:S.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[9]||(e[9]=a=>S.value=!S.value)},null,8,["name"])]),_:1},8,["modelValue","type"])])]),_:1}),l(G,{align:"left"},{default:d(()=>[l(M,{flat:"",label:"Update Info",color:"secondary",onClick:e[11]||(e[11]=a=>k($(v)))}),l(M,{flat:"",label:"Close",color:"primary",onClick:D})]),_:1}),l(ne,{class:"bg-primary text-white"},{default:d(()=>[le(" Response: "+te(o.subscriber),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var me=W(ce,[["__scopeId","data-v-7a71efd4"]]);const we=T({__name:"InetConfig",setup(p){const r=E(),s=n(),v=n([]),f=r.$state.subscribercolumns,u=async()=>{await w.get("http://127.0.0.1:8000/api/subscriber_test").then(t=>{if(t)v.value=t.data;else throw new Error("Could not retrieve data!")}).catch(t=>{console.log(t)})},c=async t=>{s.value=t,await w.get("http://127.0.0.1:8000/api/subscriber_test/"+t).then(i=>{r.$state.subscriberDetail=i.data;const{subscriber_name:m,serial_number:b,acc_no:_,package_type:g,ssid:S,password:o,mode:y,olt_ip:D,olt_interface:k}=i.data;if(r.$patch({subscriberDetail:{subscriber_name:m,serial_number:b,acc_no:_,package_type:g,mode:y,ssid:S,password:o,olt_ip:D,olt_interface:k}}),i)r.$state.modalIsOpen=!r.$state.modalIsOpen;else throw new Error("Could not retrieve data!")}).catch(i=>{console.log(i)})};return se(()=>{u()}),(t,i)=>(A(),P(U,{padding:""},{default:d(()=>[l(Y,{title:"Subscriber Table",rows:v.value,"row-key":"name",columns:$(f),loading:!(v.value.length>0)},{"body-cell-actions":d(m=>[l(H,{props:m},{default:d(()=>[l(M,{dense:"",round:"",flat:"",icon:"mode_edit",onClick:b=>c(m.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","loading"]),l(me,{"data-id":s.value,"get-subsribers":u},null,8,["data-id"])]),_:1}))}});export{we as default};

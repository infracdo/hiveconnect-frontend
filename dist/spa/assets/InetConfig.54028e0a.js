import{c as se,h as U,Q as B,g as M}from"./QBtn.326e8d97.js";import{Q as f,a as te}from"./QInput.1a4f81f8.js";import{Q as oe}from"./QTable.9e8947e4.js";import{Q as K,a as D,b as ne,c as O}from"./QPage.5daa543f.js";import{a1 as ie,c as R,h as $,g as de,_ as W,J as Q,a2 as j,r as m,H,a3 as x,K as P,L as T,M as d,N as a,X as S,a4 as I,P as y,Q as A,a5 as J,a6 as X,a7 as re,a8 as ue}from"./index.1f269414.js";import{Q as z,a as q,b as L,c as Y}from"./QCard.bfa83f18.js";import{a as ce,d as me}from"./QItem.f6d379d7.js";import{a as N}from"./axios.a596eead.js";import{g as pe,a as F,b as be}from"./networkAddressAPIs.e5fcd444.js";import{g as fe}from"./rougeDevicesApi.d81ac5d7.js";import"./QList.6f2aa415.js";const Z=ie("subsciber",{state:()=>({subscriberDetail:{subscriber_name:"",serial_number:"",acc_no:"",package_type:"",ssid:"",password:"",mode:"",olt_ip:"",olt_interface:""},modalIsOpen:!1,subscribercolumns:[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"accountNumber",label:"Account No.",field:"accountNumber",align:"left",sortable:!0},{name:"clientName",label:"Client Name",field:"clientName",align:"left",sortable:!0},{name:"ipAssigned",label:"IP Assigned",field:"ipAssigned",align:"left",sortable:!0},{name:"onuSerialNumber",label:"ONU Serial Number",field:"onuSerialNumber",align:"left",sortable:!0},{name:"onuMacAddress",label:"ONU Mac Address",field:"onuMacAddress",align:"left",sortable:!0},{name:"oltIp",label:"OLT IP",field:"oltIp",align:"left",sortable:!0},{name:"packageTypeId",label:"Package Type ID",field:"packageTypeId",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}]})});var ee=se({name:"QBanner",props:{...ce,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(c,{slots:r}){const{proxy:{$q:i}}=de(),v=me(c,i),g=R(()=>"q-banner row items-center"+(c.dense===!0?" q-banner--dense":"")+(v.value===!0?" q-banner--dark q-dark":"")+(c.rounded===!0?" rounded-borders":"")),_=R(()=>`q-banner__actions row items-center justify-end col-${c.inlineActions===!0?"auto":"all"}`);return()=>{const l=[$("div",{class:"q-banner__avatar col-auto row items-center self-start"},U(r.avatar)),$("div",{class:"q-banner__content col text-body2"},U(r.default))],p=U(r.action);return p!==void 0&&l.push($("div",{class:_.value},p)),$("div",{class:g.value+(c.inlineActions===!1&&p!==void 0?" q-banner--top-padding":""),role:"alert"},l)}}});const k=c=>(J("data-v-7a47d3e6"),c=c(),X(),c),ve={class:""},ge={class:""},_e={class:"q-gutter-sm"},Ve=k(()=>I("br",null,null,-1)),we=k(()=>I("br",null,null,-1)),Ie=k(()=>I("br",null,null,-1)),Ne=k(()=>I("br",null,null,-1)),ye=k(()=>I("br",null,null,-1)),Ae="http://127.0.0.1:8000",E="http://172.91.0.136:7547",G="http://172.91.10.108:8080",Se=Q({__name:"SubscriberModal",props:["dataId","getSubsribers"],setup(c){const r=c;N.defaults.timeout=0;const i=Z(),{dataId:v}=j(r),g=m(""),_=m(""),l=m(""),p=m(""),V=m(""),w=m(""),u=m(""),s=m(""),t=m(""),b=m(!0),o=H({subscriber:"",configureSsid:"",setBandwidth:"",runAnsible:"",wanConfig:""});x(()=>{g.value=i.$state.subscriberDetail.acc_no,_.value=i.$state.subscriberDetail.subscriber_name,l.value=i.$state.subscriberDetail.package_type,p.value=i.$state.subscriberDetail.serial_number,V.value=i.$state.subscriberDetail.olt_ip,w.value=i.$state.subscriberDetail.olt_interface,u.value=i.$state.subscriberDetail.mode,s.value=i.$state.subscriberDetail.ssid,t.value=i.$state.subscriberDetail.password});const C=["0/1:1","0/1:2","0/1:3","0/2:1","0/2:2","0/2:3","0/3:1","0/3:2","0/3:3"],ae=()=>{i.$state.modalIsOpen=!i.$state.modalIsOpen},le=async h=>{await N.put(`${Ae}/api/subscriber_test/${h}/edit`,{acc_no:g.value,subscriber_name:_.value,serial_number:p.value,olt_ip:V.value,olt_interface:w.value,package_type:l.value,mode:u.value,ssid:s.value,password:t.value}).then(e=>{o.subscriber=e.data,r.getSubsribers()}).catch(e=>{o.subscriber=e}),await N.post(`${E}/configureSSID`,{SN:p.value,NewSSID:u.value==="Bridged"?"":s.value,Password:t.value}).then(e=>{o.configureSsid=e.data}).catch(e=>{o.configureSsid=e}),await N.post(`${E}/bridgedWanConfig`,{SN:p.value}).then(e=>{o.wanConfig=e.data}).catch(e=>{o.wanConfig=e}),await N.post(G+"/setBandwidth").then(e=>{if(e.data)o.setBandwidth="Bandwidth Config Success!";else throw new Error("Something went wrong!")}).catch(e=>{o.setBandwidth=e}),await N.post(G+"/runPlaybook").then(e=>{if(e.data)o.runAnsible="Successfull Setup!";else throw new Error("Something went wrong!")}).catch(e=>{o.runAnsible=e})};return(h,e)=>(P(),T(O,null,{default:d(()=>[a(K,{modelValue:S(i).$state.modalIsOpen,"onUpdate:modelValue":e[12]||(e[12]=n=>S(i).$state.modalIsOpen=n),modelModifiers:{trim:!0}},{default:d(()=>[a(z,null,{default:d(()=>[a(q,{class:"flex-subscriber"},{default:d(()=>[I("div",ve,[a(f,{modelValue:g.value,"onUpdate:modelValue":e[0]||(e[0]=n=>g.value=n),modelModifiers:{trim:!0},outlined:"",label:"Account No.",class:"q-ma-md",disable:""},null,8,["modelValue"]),a(f,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=n=>_.value=n),modelModifiers:{trim:!0},outlined:"",label:"Subscriber Name",class:"q-ma-md",disable:""},null,8,["modelValue"]),a(f,{modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=n=>l.value=n),modelModifiers:{trim:!0},outlined:"",label:"Package Type",class:"q-ma-md",disable:""},null,8,["modelValue"]),a(f,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=n=>p.value=n),modelModifiers:{trim:!0},outlined:"",label:"Serial Number",class:"q-ma-md"},null,8,["modelValue"]),a(D,{modelValue:V.value,"onUpdate:modelValue":e[4]||(e[4]=n=>V.value=n),modelModifiers:{trim:!0},filled:"",options:["172.16.0.2","172.16.0.58","172.16.0.22"],label:"OLT IP",class:"q-ma-md"},null,8,["modelValue"])]),I("div",ge,[a(D,{modelValue:w.value,"onUpdate:modelValue":e[5]||(e[5]=n=>w.value=n),modelModifiers:{trim:!0},filled:"",options:C,label:"OLT Interface",class:"q-ma-md"},null,8,["modelValue"]),a(ne,{filled:"",label:"Mode","stack-label":"",class:"q-ma-md"},{control:d(()=>[I("div",_e,[a(L,{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=n=>u.value=n),modelModifiers:{trim:!0},dense:"",val:"Bridged",label:"Bridged"},null,8,["modelValue"]),a(L,{modelValue:u.value,"onUpdate:modelValue":e[7]||(e[7]=n=>u.value=n),modelModifiers:{trim:!0},dense:"",val:"Routed",label:"Routed"},null,8,["modelValue"])])]),_:1}),a(f,{modelValue:s.value,"onUpdate:modelValue":e[8]||(e[8]=n=>s.value=n),modelModifiers:{trim:!0},outlined:"",class:"q-ma-md",label:"SSID"},null,8,["modelValue"]),a(f,{modelValue:t.value,"onUpdate:modelValue":e[10]||(e[10]=n=>t.value=n),modelModifiers:{trim:!0},outlined:"",class:"q-ma-md",label:"Password",type:b.value?"password":"text"},{append:d(()=>[a(B,{name:b.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[9]||(e[9]=n=>b.value=!b.value)},null,8,["name"])]),_:1},8,["modelValue","type"])])]),_:1}),a(Y,{align:"left"},{default:d(()=>[a(M,{flat:"",label:"Update Info",color:"secondary",onClick:e[11]||(e[11]=n=>le(S(v)))}),a(M,{flat:"",label:"Close",color:"primary",onClick:ae})]),_:1}),a(ee,{class:"bg-primary text-white"},{default:d(()=>[y(" Subscriber Details: "+A(o.subscriber)+" ",1),Ve,y(" SSID/Password Config: "+A(o.configureSsid)+" ",1),we,y(" Wan Config: "+A(o.wanConfig)+" ",1),Ie,y(" Bandwidth: "+A(o.setBandwidth)+" ",1),Ne,y(" Playbook: "+A(o.runAnsible)+" ",1),ye]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var Me=W(Se,[["__scopeId","data-v-7a47d3e6"]]);const Ce=c=>(J("data-v-6c93cc9c"),c=c(),X(),c),ke=Ce(()=>I("div",{class:"text-h6"},"For Provisioning",-1)),$e=Q({__name:"AddNewClient",props:{isOpen:{type:Boolean},serialAndMac:{},client:{},closeModal:{type:Function}},setup(c){const r=c,{isOpen:i}=j(r),v=()=>{r.closeModal()},g=[{label:"Gusa 1",value:"172.16.0.2"},{label:"Gusa 2",value:"172.16.0.10"}],_=m(""),l=H({clientId:0,accountNumber:"",packageType:"",serialAndMac:{serialNum:{label:"",idx:0},macAddress:""},oltIp:"",ipAssign:"",clientName:""});re(()=>{var u,s;l.serialAndMac.serialNum.label=(u=r.client)==null?void 0:u.onuSerialNumber,l.serialAndMac.macAddress=(s=r.client)==null?void 0:s.onuMacAddress}),x(()=>{var u,s,t,b,o,C;l.clientId=(u=r.client)==null?void 0:u.id,l.accountNumber=(s=r.client)==null?void 0:s.accountNumber,l.clientName=(t=r.client)==null?void 0:t.clientName,l.ipAssign=(b=r.client)==null?void 0:b.ipAssigned,l.oltIp=(o=r.client)==null?void 0:o.oltIp,l.packageType=(C=r.client)==null?void 0:C.packageTypeId});const p=async()=>{console.log(l)},V=async()=>{const[u]=await pe(),{ipAddress:s}=u;l.ipAssign=s},w=()=>{l.serialAndMac.macAddress=r.serialAndMac[l.serialAndMac.serialNum.idx].mac_address};return(u,s)=>(P(),T(O,null,{default:d(()=>[a(K,{modelValue:S(i),"onUpdate:modelValue":s[7]||(s[7]=t=>ue(i)?i.value=t:null),persistent:""},{default:d(()=>[a(z,null,{default:d(()=>[a(q,null,{default:d(()=>[ke]),_:1}),a(q,{class:"q-pt-none flex-client"},{default:d(()=>[a(f,{modelValue:l.accountNumber,"onUpdate:modelValue":s[0]||(s[0]=t=>l.accountNumber=t),filled:"",label:"Account Number",readonly:""},null,8,["modelValue"]),a(f,{modelValue:l.clientName,"onUpdate:modelValue":s[1]||(s[1]=t=>l.clientName=t),filled:"",label:"Client Name",readonly:""},null,8,["modelValue"]),a(f,{modelValue:l.ipAssign,"onUpdate:modelValue":s[2]||(s[2]=t=>l.ipAssign=t),filled:"",label:"IP Assign",readonly:""},{append:d(()=>[a(B,{name:"add",class:"cursor-pointer",onClick:V})]),_:1},8,["modelValue"]),a(f,{modelValue:l.packageType,"onUpdate:modelValue":s[3]||(s[3]=t=>l.packageType=t),filled:"",label:"Package Type",readonly:""},null,8,["modelValue"]),a(D,{outlined:"",modelValue:l.serialAndMac.serialNum,"onUpdate:modelValue":[s[4]||(s[4]=t=>l.serialAndMac.serialNum=t),w],options:u.serialAndMac.map((t,b)=>({label:t.serial_number,idx:b})),label:"ONU Seriual Number"},null,8,["modelValue","options"]),a(f,{modelValue:l.serialAndMac.macAddress,"onUpdate:modelValue":s[5]||(s[5]=t=>l.serialAndMac.macAddress=t),filled:"",label:"ONU Mac Address",readonly:""},null,8,["modelValue"]),a(D,{outlined:"",modelValue:l.oltIp,"onUpdate:modelValue":s[6]||(s[6]=t=>l.oltIp=t),options:g,label:"OLT","emit-value":"","map-options":""},null,8,["modelValue"]),a(Y,{align:"right"},{default:d(()=>[a(M,{flat:"",label:"OK",color:"primary",onClick:p}),a(M,{flat:"",label:"close",color:"primary",onClick:v})]),_:1})]),_:1}),a(ee,{class:"bg-primary text-white"},{default:d(()=>[y(" Response: "+A(_.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var De=W($e,[["__scopeId","data-v-6c93cc9c"]]);const Fe=Q({__name:"InetConfig",setup(c){const r=Z(),i=m(),v=m([]),g=m(""),_=r.$state.subscribercolumns,l=m(!1);let p=[];const V=m({id:0,accountNumber:"",clientName:"",ipAssigned:"",onuSerialNumber:"",oltIp:"",onuMacAddress:"",packageTypeId:""}),w=async t=>{l.value=!l.value,p=(await fe()).map(o=>({serial_number:o.serial_number,mac_address:o.mac_address})),V.value=await be(t)},u=()=>{l.value=!l.value},s=async()=>{v.value=[],v.value=await F()};return x(async()=>{v.value=await F()}),(t,b)=>(P(),T(O,{padding:""},{default:d(()=>[a(oe,{rows:v.value,title:"For Provision","row-key":"name",columns:S(_),loading:!(v.value.length>0),pagination:{rowsPerPage:10},dense:t.$q.screen.lt.md},{"body-cell-actions":d(o=>[a(te,{props:o},{default:d(()=>[a(M,{dense:"",round:"",flat:"",icon:"assignment",onClick:C=>w(o.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),"top-right":d(()=>[a(M,{icon:"autorenew",class:"cursor-pointer q-mx-sm",onClick:s,flat:""}),a(f,{modelValue:g.value,"onUpdate:modelValue":b[0]||(b[0]=o=>g.value=o),filled:"",dense:"",label:"Search",debounce:"300",color:"primary"},{append:d(()=>[a(B,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","loading","dense"]),a(De,{"is-open":l.value,onOpenModal:w,"serial-and-mac":S(p),client:V.value,"close-modal":u},null,8,["is-open","serial-and-mac","client"]),a(Me,{"data-id":i.value,"get-subsribers":s},null,8,["data-id"])]),_:1}))}});export{Fe as default};

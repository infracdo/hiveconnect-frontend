import{c as te,h as B,Q as h,f as k}from"./QBtn.ce037c4f.js";import{Q as f,a as se,g as q,b as oe,c as ne,d as de}from"./networkAddressAPIs.0ccbc8ec.js";import{Q as j,a as E,b as re,c as x,d as ie}from"./QPage.66e76185.js";import{Y as ue,c as L,h as M,g as ce,_ as G,D as P,Z as H,r as m,B as J,$ as Y,E as T,F as R,G as n,H as a,R as C,a0 as g,J as y,K as N,a1 as Z,a2 as z,a3 as me}from"./index.bb64baf8.js";import{a as I}from"./axios.a596eead.js";import{Q as X,a as Q,b as F,c as ee}from"./QCard.35db8b5b.js";import{a as pe,d as be}from"./QItem.78c901d8.js";const ae=ue("subsciber",{state:()=>({subscriberDetail:{subscriber_name:"",serial_number:"",acc_no:"",package_type:"",ssid:"",password:"",mode:"",olt_ip:"",olt_interface:""},modalIsOpen:!1,subscribercolumns:[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"account_No",label:"Account No.",field:"account_No",align:"left",sortable:!0},{name:"ip_assigned",label:"IP Assigned",field:"ip_assigned",align:"left",sortable:!0},{name:"onu_serial_no",label:"ONU Serial Number",field:"onu_serial_no",align:"left",sortable:!0},{name:"olt_ip",label:"OLT IP",field:"olt_ip",align:"left",sortable:!0},{name:"onu_mac_address",label:"ONU Mac Address",field:"onu_mac_address",align:"left",sortable:!0},{name:"package_type_id",label:"Package Type ID",field:"package_type_id",align:"left",sortable:!0}]})});var le=te({name:"QBanner",props:{...pe,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(r,{slots:p}){const{proxy:{$q:d}}=ce(),v=be(r,d),b=L(()=>"q-banner row items-center"+(r.dense===!0?" q-banner--dense":"")+(v.value===!0?" q-banner--dark q-dark":"")+(r.rounded===!0?" rounded-borders":"")),_=L(()=>`q-banner__actions row items-center justify-end col-${r.inlineActions===!0?"auto":"all"}`);return()=>{const l=[M("div",{class:"q-banner__avatar col-auto row items-center self-start"},B(p.avatar)),M("div",{class:"q-banner__content col text-body2"},B(p.default))],u=B(p.action);return u!==void 0&&l.push(M("div",{class:_.value},u)),M("div",{class:b.value+(r.inlineActions===!1&&u!==void 0?" q-banner--top-padding":""),role:"alert"},l)}}});const A=r=>(Z("data-v-704e4894"),r=r(),z(),r),fe={class:""},ve={class:""},_e={class:"q-gutter-sm"},ge=A(()=>g("br",null,null,-1)),we=A(()=>g("br",null,null,-1)),Ve=A(()=>g("br",null,null,-1)),Ie=A(()=>g("br",null,null,-1)),Se=A(()=>g("br",null,null,-1)),ye="http://127.0.0.1:8000",K="http://172.91.0.136:7547",W="http://172.91.10.108:8080",Ne=P({__name:"SubscriberModal",props:["dataId","getSubsribers"],setup(r){const p=r;I.defaults.timeout=0;const d=ae(),{dataId:v}=H(p),b=m(""),_=m(""),l=m(""),u=m(""),w=m(""),c=m(""),t=m(""),s=m(""),V=m(""),S=m(!0),i=J({subscriber:"",configureSsid:"",setBandwidth:"",runAnsible:"",wanConfig:""});Y(()=>{b.value=d.$state.subscriberDetail.acc_no,_.value=d.$state.subscriberDetail.subscriber_name,l.value=d.$state.subscriberDetail.package_type,u.value=d.$state.subscriberDetail.serial_number,w.value=d.$state.subscriberDetail.olt_ip,c.value=d.$state.subscriberDetail.olt_interface,t.value=d.$state.subscriberDetail.mode,s.value=d.$state.subscriberDetail.ssid,V.value=d.$state.subscriberDetail.password});const D=["0/1:1","0/1:2","0/1:3","0/2:1","0/2:2","0/2:3","0/3:1","0/3:2","0/3:3"],U=()=>{d.$state.modalIsOpen=!d.$state.modalIsOpen},O=async $=>{await I.put(`${ye}/api/subscriber_test/${$}/edit`,{acc_no:b.value,subscriber_name:_.value,serial_number:u.value,olt_ip:w.value,olt_interface:c.value,package_type:l.value,mode:t.value,ssid:s.value,password:V.value}).then(e=>{i.subscriber=e.data,p.getSubsribers()}).catch(e=>{i.subscriber=e}),await I.post(`${K}/configureSSID`,{SN:u.value,NewSSID:t.value==="Bridged"?"":s.value,Password:V.value}).then(e=>{i.configureSsid=e.data}).catch(e=>{i.configureSsid=e}),await I.post(`${K}/bridgedWanConfig`,{SN:u.value}).then(e=>{i.wanConfig=e.data}).catch(e=>{i.wanConfig=e}),await I.post(W+"/setBandwidth").then(e=>{if(e.data)i.setBandwidth="Bandwidth Config Success!";else throw new Error("Something went wrong!")}).catch(e=>{i.setBandwidth=e}),await I.post(W+"/runPlaybook").then(e=>{if(e.data)i.runAnsible="Successfull Setup!";else throw new Error("Something went wrong!")}).catch(e=>{i.runAnsible=e})};return($,e)=>(T(),R(x,null,{default:n(()=>[a(j,{modelValue:C(d).$state.modalIsOpen,"onUpdate:modelValue":e[12]||(e[12]=o=>C(d).$state.modalIsOpen=o),modelModifiers:{trim:!0}},{default:n(()=>[a(X,null,{default:n(()=>[a(Q,{class:"flex-subscriber"},{default:n(()=>[g("div",fe,[a(f,{modelValue:b.value,"onUpdate:modelValue":e[0]||(e[0]=o=>b.value=o),modelModifiers:{trim:!0},outlined:"",label:"Account No.",class:"q-ma-md",disable:""},null,8,["modelValue"]),a(f,{modelValue:_.value,"onUpdate:modelValue":e[1]||(e[1]=o=>_.value=o),modelModifiers:{trim:!0},outlined:"",label:"Subscriber Name",class:"q-ma-md",disable:""},null,8,["modelValue"]),a(f,{modelValue:l.value,"onUpdate:modelValue":e[2]||(e[2]=o=>l.value=o),modelModifiers:{trim:!0},outlined:"",label:"Package Type",class:"q-ma-md",disable:""},null,8,["modelValue"]),a(f,{modelValue:u.value,"onUpdate:modelValue":e[3]||(e[3]=o=>u.value=o),modelModifiers:{trim:!0},outlined:"",label:"Serial Number",class:"q-ma-md"},null,8,["modelValue"]),a(E,{modelValue:w.value,"onUpdate:modelValue":e[4]||(e[4]=o=>w.value=o),modelModifiers:{trim:!0},filled:"",options:["172.16.0.2","172.16.0.58","172.16.0.22"],label:"OLT IP",class:"q-ma-md"},null,8,["modelValue"])]),g("div",ve,[a(E,{modelValue:c.value,"onUpdate:modelValue":e[5]||(e[5]=o=>c.value=o),modelModifiers:{trim:!0},filled:"",options:D,label:"OLT Interface",class:"q-ma-md"},null,8,["modelValue"]),a(re,{filled:"",label:"Mode","stack-label":"",class:"q-ma-md"},{control:n(()=>[g("div",_e,[a(F,{modelValue:t.value,"onUpdate:modelValue":e[6]||(e[6]=o=>t.value=o),modelModifiers:{trim:!0},dense:"",val:"Bridged",label:"Bridged"},null,8,["modelValue"]),a(F,{modelValue:t.value,"onUpdate:modelValue":e[7]||(e[7]=o=>t.value=o),modelModifiers:{trim:!0},dense:"",val:"Routed",label:"Routed"},null,8,["modelValue"])])]),_:1}),a(f,{modelValue:s.value,"onUpdate:modelValue":e[8]||(e[8]=o=>s.value=o),modelModifiers:{trim:!0},outlined:"",class:"q-ma-md",label:"SSID"},null,8,["modelValue"]),a(f,{modelValue:V.value,"onUpdate:modelValue":e[10]||(e[10]=o=>V.value=o),modelModifiers:{trim:!0},outlined:"",class:"q-ma-md",label:"Password",type:S.value?"password":"text"},{append:n(()=>[a(h,{name:S.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:e[9]||(e[9]=o=>S.value=!S.value)},null,8,["name"])]),_:1},8,["modelValue","type"])])]),_:1}),a(ee,{align:"left"},{default:n(()=>[a(k,{flat:"",label:"Update Info",color:"secondary",onClick:e[11]||(e[11]=o=>O(C(v)))}),a(k,{flat:"",label:"Close",color:"primary",onClick:U})]),_:1}),a(le,{class:"bg-primary text-white"},{default:n(()=>[y(" Subscriber Details: "+N(i.subscriber)+" ",1),ge,y(" SSID/Password Config: "+N(i.configureSsid)+" ",1),we,y(" Wan Config: "+N(i.wanConfig)+" ",1),Ve,y(" Bandwidth: "+N(i.setBandwidth)+" ",1),Ie,y(" Playbook: "+N(i.runAnsible)+" ",1),Se]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var Ce=G(Ne,[["__scopeId","data-v-704e4894"]]);const ke=r=>(Z("data-v-733ac730"),r=r(),z(),r),Ae=ke(()=>g("div",{class:"text-h6"}," Add New Client ",-1)),$e=P({__name:"AddNewClient",props:{isOpen:Boolean},emits:["closeModal"],setup(r,{emit:p}){const d=r,{isOpen:v}=H(d),b=m(""),_=()=>{p("closeModal")},l=J({accountNumber:"",packageType:"",onuSerialNum:"",onuMacAddress:"",oltIp:"",ipAssign:""}),u=async()=>{try{const c=await se(l.accountNumber,l.oltIp,l.onuSerialNum,l.packageType,l.onuMacAddress,l.ipAssign);b.value=c.data,l.accountNumber="",l.packageType="",l.onuSerialNum="",l.onuMacAddress="",l.oltIp="",l.ipAssign=""}catch(c){b.value="Unsuccessful client add: "+c}q()},w=async()=>{const[c]=await oe(),{ipAddress:t}=c;l.ipAssign=t};return(c,t)=>(T(),R(x,null,{default:n(()=>[a(j,{modelValue:C(v),"onUpdate:modelValue":t[6]||(t[6]=s=>me(v)?v.value=s:null)},{default:n(()=>[a(X,null,{default:n(()=>[a(Q,null,{default:n(()=>[Ae]),_:1}),a(Q,{class:"q-pt-none flex-client"},{default:n(()=>[a(f,{modelValue:l.accountNumber,"onUpdate:modelValue":t[0]||(t[0]=s=>l.accountNumber=s),outlined:"",label:"Account Number"},null,8,["modelValue"]),a(f,{modelValue:l.ipAssign,"onUpdate:modelValue":t[1]||(t[1]=s=>l.ipAssign=s),outlined:"",label:"IP Assign"},{append:n(()=>[a(h,{name:"add",class:"cursor-pointer",onClick:w})]),_:1},8,["modelValue"]),a(f,{modelValue:l.packageType,"onUpdate:modelValue":t[2]||(t[2]=s=>l.packageType=s),outlined:"",label:"Package Type"},null,8,["modelValue"]),a(f,{modelValue:l.onuSerialNum,"onUpdate:modelValue":t[3]||(t[3]=s=>l.onuSerialNum=s),outlined:"",label:"ONU Seriual Number"},null,8,["modelValue"]),a(f,{modelValue:l.onuMacAddress,"onUpdate:modelValue":t[4]||(t[4]=s=>l.onuMacAddress=s),outlined:"",label:"Mac Address"},null,8,["modelValue"]),a(f,{modelValue:l.oltIp,"onUpdate:modelValue":t[5]||(t[5]=s=>l.oltIp=s),outlined:"",label:"OLT IP"},null,8,["modelValue"]),a(ee,{align:"right"},{default:n(()=>[a(k,{flat:"",label:"OK",color:"primary",onClick:u}),a(k,{flat:"",label:"close",color:"primary",onClick:_})]),_:1})]),_:1}),a(le,{class:"bg-primary text-white"},{default:n(()=>[y(" Response: "+N(b.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var Me=G($e,[["__scopeId","data-v-733ac730"]]);const xe=P({__name:"InetConfig",setup(r){const p=ae(),d=m(),v=m([]),b=m(""),_=p.$state.subscribercolumns,l=m(!1),u=()=>{l.value=!l.value},w=async c=>{d.value=c,await I.get("http://127.0.0.1:8000/api/subscriber_test/"+c).then(t=>{p.$state.subscriberDetail=t.data;const{subscriber_name:s,serial_number:V,acc_no:S,package_type:i,ssid:D,password:U,mode:O,olt_ip:$,olt_interface:e}=t.data;if(p.$patch({subscriberDetail:{subscriber_name:s,serial_number:V,acc_no:S,package_type:i,mode:O,ssid:D,password:U,olt_ip:$,olt_interface:e}}),t)p.$state.modalIsOpen=!p.$state.modalIsOpen;else throw new Error("Could not retrieve data!")}).catch(t=>{console.log(t)})};return Y(async()=>{v.value=await q()}),(c,t)=>(T(),R(x,{padding:""},{default:n(()=>[a(ie,{rows:v.value,"row-key":"name",columns:C(_),loading:!(v.value.length>0),pagination:{rowsPerPage:10}},{"body-cell-actions":n(s=>[a(ne,{props:s},{default:n(()=>[a(k,{dense:"",round:"",flat:"",icon:"mode_edit",onClick:V=>w(s.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),top:n(()=>[a(k,{color:"primary",label:"Add New Client",onClick:u}),a(de),a(f,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=s=>b.value=s),filled:"",dense:"",label:"Search",debounce:"300",color:"primary"},{append:n(()=>[a(h,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","loading"]),a(Me,{"is-open":l.value,onCloseModal:u},null,8,["is-open"]),a(Ce,{"data-id":d.value,"get-subsribers":C(q)},null,8,["data-id","get-subsribers"])]),_:1}))}});export{xe as default};

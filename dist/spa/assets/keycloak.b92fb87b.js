import{r as reactive,d as defineStore,b as boot}from"./index.644cea97.js";import{a as axios}from"./axios.66c02ff4.js";var commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},base64Js={};base64Js.byteLength=byteLength;base64Js.toByteArray=toByteArray;base64Js.fromByteArray=fromByteArray;var lookup=[],revLookup=[],Arr=typeof Uint8Array!="undefined"?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i)lookup[i]=code[i],revLookup[code.charCodeAt(i)]=i;revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var s=t.indexOf("=");s===-1&&(s=e);var o=s===e?0:4-s%4;return[s,o]}function byteLength(t){var e=getLens(t),s=e[0],o=e[1];return(s+o)*3/4-o}function _byteLength(t,e,s){return(e+s)*3/4-s}function toByteArray(t){var e,s=getLens(t),o=s[0],f=s[1],a=new Arr(_byteLength(t,o,f)),v=0,l=f>0?o-4:o,x;for(x=0;x<l;x+=4)e=revLookup[t.charCodeAt(x)]<<18|revLookup[t.charCodeAt(x+1)]<<12|revLookup[t.charCodeAt(x+2)]<<6|revLookup[t.charCodeAt(x+3)],a[v++]=e>>16&255,a[v++]=e>>8&255,a[v++]=e&255;return f===2&&(e=revLookup[t.charCodeAt(x)]<<2|revLookup[t.charCodeAt(x+1)]>>4,a[v++]=e&255),f===1&&(e=revLookup[t.charCodeAt(x)]<<10|revLookup[t.charCodeAt(x+1)]<<4|revLookup[t.charCodeAt(x+2)]>>2,a[v++]=e>>8&255,a[v++]=e&255),a}function tripletToBase64(t){return lookup[t>>18&63]+lookup[t>>12&63]+lookup[t>>6&63]+lookup[t&63]}function encodeChunk(t,e,s){for(var o,f=[],a=e;a<s;a+=3)o=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(t[a+2]&255),f.push(tripletToBase64(o));return f.join("")}function fromByteArray(t){for(var e,s=t.length,o=s%3,f=[],a=16383,v=0,l=s-o;v<l;v+=a)f.push(encodeChunk(t,v,v+a>l?l:v+a));return o===1?(e=t[s-1],f.push(lookup[e>>2]+lookup[e<<4&63]+"==")):o===2&&(e=(t[s-2]<<8)+t[s-1],f.push(lookup[e>>10]+lookup[e>>4&63]+lookup[e<<2&63]+"=")),f.join("")}var sha256$1={exports:{}};/**
 * [js-sha256]{@link https://github.com/emn178/js-sha256}
 *
 * @version 0.9.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2017
 * @license MIT
 */(function(module){(function(){var ERROR="input is invalid type",WINDOW=typeof window=="object",root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&typeof self=="object",NODE_JS=!root.JS_SHA256_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;NODE_JS?root=commonjsGlobal:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&!0&&module.exports,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer!="undefined",HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(t){return typeof t=="object"&&t.buffer&&t.buffer.constructor===ArrayBuffer});var createOutputMethod=function(t,e){return function(s){return new Sha256(e,!0).update(s)[t]()}},createMethod=function(t){var e=createOutputMethod("hex",t);NODE_JS&&(e=nodeWrap(e,t)),e.create=function(){return new Sha256(t)},e.update=function(f){return e.create().update(f)};for(var s=0;s<OUTPUT_TYPES.length;++s){var o=OUTPUT_TYPES[s];e[o]=createOutputMethod(o,t)}return e},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(t){if(typeof t=="string")return crypto.createHash(algorithm).update(t,"utf8").digest("hex");if(t==null)throw new Error(ERROR);return t.constructor===ArrayBuffer&&(t=new Uint8Array(t)),Array.isArray(t)||ArrayBuffer.isView(t)||t.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(t)).digest("hex"):method(t)};return nodeMethod},createHmacOutputMethod=function(t,e){return function(s,o){return new HmacSha256(s,e,!0).update(o)[t]()}},createHmacMethod=function(t){var e=createHmacOutputMethod("hex",t);e.create=function(f){return new HmacSha256(f,t)},e.update=function(f,a){return e.create(f).update(a)};for(var s=0;s<OUTPUT_TYPES.length;++s){var o=OUTPUT_TYPES[s];e[o]=createHmacOutputMethod(o,t)}return e};function Sha256(t,e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}Sha256.prototype.update=function(t){if(!this.finalized){var e,s=typeof t;if(s!=="string"){if(s==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);e=!0}for(var o,f=0,a,v=t.length,l=this.blocks;f<v;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),e)for(a=this.start;f<v&&a<64;++f)l[a>>2]|=t[f]<<SHIFT[a++&3];else for(a=this.start;f<v&&a<64;++f)o=t.charCodeAt(f),o<128?l[a>>2]|=o<<SHIFT[a++&3]:o<2048?(l[a>>2]|=(192|o>>6)<<SHIFT[a++&3],l[a>>2]|=(128|o&63)<<SHIFT[a++&3]):o<55296||o>=57344?(l[a>>2]|=(224|o>>12)<<SHIFT[a++&3],l[a>>2]|=(128|o>>6&63)<<SHIFT[a++&3],l[a>>2]|=(128|o&63)<<SHIFT[a++&3]):(o=65536+((o&1023)<<10|t.charCodeAt(++f)&1023),l[a>>2]|=(240|o>>18)<<SHIFT[a++&3],l[a>>2]|=(128|o>>12&63)<<SHIFT[a++&3],l[a>>2]|=(128|o>>6&63)<<SHIFT[a++&3],l[a>>2]|=(128|o&63)<<SHIFT[a++&3]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=l[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=EXTRA[e&3],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var t=this.h0,e=this.h1,s=this.h2,o=this.h3,f=this.h4,a=this.h5,v=this.h6,l=this.h7,x=this.blocks,y,R,_,C,b,U,T,E,O,H,X;for(y=16;y<64;++y)b=x[y-15],R=(b>>>7|b<<25)^(b>>>18|b<<14)^b>>>3,b=x[y-2],_=(b>>>17|b<<15)^(b>>>19|b<<13)^b>>>10,x[y]=x[y-16]+R+x[y-7]+_<<0;for(X=e&s,y=0;y<64;y+=4)this.first?(this.is224?(E=300032,b=x[0]-1413257819,l=b-150054599<<0,o=b+24177077<<0):(E=704751109,b=x[0]-210244248,l=b-1521486534<<0,o=b+143694565<<0),this.first=!1):(R=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),_=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7),E=t&e,C=E^t&s^X,T=f&a^~f&v,b=l+_+T+K[y]+x[y],U=R+C,l=o+b<<0,o=b+U<<0),R=(o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10),_=(l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7),O=o&t,C=O^o&e^E,T=l&f^~l&a,b=v+_+T+K[y+1]+x[y+1],U=R+C,v=s+b<<0,s=b+U<<0,R=(s>>>2|s<<30)^(s>>>13|s<<19)^(s>>>22|s<<10),_=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7),H=s&o,C=H^s&t^O,T=v&l^~v&f,b=a+_+T+K[y+2]+x[y+2],U=R+C,a=e+b<<0,e=b+U<<0,R=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),_=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),X=e&s,C=X^e&o^H,T=a&v^~a&l,b=f+_+T+K[y+3]+x[y+3],U=R+C,f=t+b<<0,t=b+U<<0;this.h0=this.h0+t<<0,this.h1=this.h1+e<<0,this.h2=this.h2+s<<0,this.h3=this.h3+o<<0,this.h4=this.h4+f<<0,this.h5=this.h5+a<<0,this.h6=this.h6+v<<0,this.h7=this.h7+l<<0},Sha256.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,s=this.h2,o=this.h3,f=this.h4,a=this.h5,v=this.h6,l=this.h7,x=HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[t&15]+HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[e&15]+HEX_CHARS[s>>28&15]+HEX_CHARS[s>>24&15]+HEX_CHARS[s>>20&15]+HEX_CHARS[s>>16&15]+HEX_CHARS[s>>12&15]+HEX_CHARS[s>>8&15]+HEX_CHARS[s>>4&15]+HEX_CHARS[s&15]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[o&15]+HEX_CHARS[f>>28&15]+HEX_CHARS[f>>24&15]+HEX_CHARS[f>>20&15]+HEX_CHARS[f>>16&15]+HEX_CHARS[f>>12&15]+HEX_CHARS[f>>8&15]+HEX_CHARS[f>>4&15]+HEX_CHARS[f&15]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[a&15]+HEX_CHARS[v>>28&15]+HEX_CHARS[v>>24&15]+HEX_CHARS[v>>20&15]+HEX_CHARS[v>>16&15]+HEX_CHARS[v>>12&15]+HEX_CHARS[v>>8&15]+HEX_CHARS[v>>4&15]+HEX_CHARS[v&15];return this.is224||(x+=HEX_CHARS[l>>28&15]+HEX_CHARS[l>>24&15]+HEX_CHARS[l>>20&15]+HEX_CHARS[l>>16&15]+HEX_CHARS[l>>12&15]+HEX_CHARS[l>>8&15]+HEX_CHARS[l>>4&15]+HEX_CHARS[l&15]),x},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,s=this.h2,o=this.h3,f=this.h4,a=this.h5,v=this.h6,l=this.h7,x=[t>>24&255,t>>16&255,t>>8&255,t&255,e>>24&255,e>>16&255,e>>8&255,e&255,s>>24&255,s>>16&255,s>>8&255,s&255,o>>24&255,o>>16&255,o>>8&255,o&255,f>>24&255,f>>16&255,f>>8&255,f&255,a>>24&255,a>>16&255,a>>8&255,a&255,v>>24&255,v>>16&255,v>>8&255,v&255];return this.is224||x.push(l>>24&255,l>>16&255,l>>8&255,l&255),x},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t};function HmacSha256(t,e,s){var o,f=typeof t;if(f==="string"){var a=[],v=t.length,l=0,x;for(o=0;o<v;++o)x=t.charCodeAt(o),x<128?a[l++]=x:x<2048?(a[l++]=192|x>>6,a[l++]=128|x&63):x<55296||x>=57344?(a[l++]=224|x>>12,a[l++]=128|x>>6&63,a[l++]=128|x&63):(x=65536+((x&1023)<<10|t.charCodeAt(++o)&1023),a[l++]=240|x>>18,a[l++]=128|x>>12&63,a[l++]=128|x>>6&63,a[l++]=128|x&63);t=a}else if(f==="object"){if(t===null)throw new Error(ERROR);if(ARRAY_BUFFER&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!Array.isArray(t)&&(!ARRAY_BUFFER||!ArrayBuffer.isView(t)))throw new Error(ERROR)}else throw new Error(ERROR);t.length>64&&(t=new Sha256(e,!0).update(t).array());var y=[],R=[];for(o=0;o<64;++o){var _=t[o]||0;y[o]=92^_,R[o]=54^_}Sha256.call(this,e,s),this.update(R),this.oKeyPad=y,this.inner=!0,this.sharedMemory=s}HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),Sha256.prototype.finalize.call(this)}};var exports=createMethod();exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),COMMON_JS?module.exports=exports:(root.sha256=exports.sha256,root.sha224=exports.sha224)})()})(sha256$1);var sha256=sha256$1.exports;if(typeof Promise=="undefined")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");var loggedConstructorDeprecation=!1;function logConstructorDeprecation(){loggedConstructorDeprecation||(loggedConstructorDeprecation=!0,console.warn("[KEYCLOAK] Instantiation using the `Keycloak` function has been deprecated and support will be removed in future versions. Use the `new` operator to create an instance instead."))}var loggedPromiseDeprecation=!1;function logPromiseDeprecation(){loggedPromiseDeprecation||(loggedPromiseDeprecation=!0,console.warn("[KEYCLOAK] Usage of legacy style promise methods such as `.error()` and `.success()` has been deprecated and support will be removed in future versions. Use standard style promise methods such as `.then() and `.catch()` instead."))}function Keycloak(t){if(!(this instanceof Keycloak))return logConstructorDeprecation(),new Keycloak(t);for(var e=this,s,o=[],f,a={enable:!0,callbackList:[],interval:5},v=document.getElementsByTagName("script"),l=0;l<v.length;l++)(v[l].src.indexOf("keycloak.js")!==-1||v[l].src.indexOf("keycloak.min.js")!==-1)&&v[l].src.indexOf("version=")!==-1&&(e.iframeVersion=v[l].src.substring(v[l].src.indexOf("version=")+8).split("&")[0]);var x=!0,y=G(console.info),R=G(console.warn);e.init=function(r){e.authenticated=!1,f=re();var n=["default","cordova","cordova-native"];if(r&&n.indexOf(r.adapter)>-1?s=Y(r.adapter):r&&typeof r.adapter=="object"?s=r.adapter:window.Cordova||window.cordova?s=Y("cordova"):s=Y(),r){if(typeof r.useNonce!="undefined"&&(x=r.useNonce),typeof r.checkLoginIframe!="undefined"&&(a.enable=r.checkLoginIframe),r.checkLoginIframeInterval&&(a.interval=r.checkLoginIframeInterval),r.onLoad==="login-required"&&(e.loginRequired=!0),r.responseMode)if(r.responseMode==="query"||r.responseMode==="fragment")e.responseMode=r.responseMode;else throw"Invalid value for responseMode";if(r.flow){switch(r.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=r.flow}if(r.timeSkew!=null&&(e.timeSkew=r.timeSkew),r.redirectUri&&(e.redirectUri=r.redirectUri),r.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=r.silentCheckSsoRedirectUri),typeof r.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=r.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,r.pkceMethod){if(r.pkceMethod!=="S256")throw"Invalid value for pkceMethod";e.pkceMethod=r.pkceMethod}typeof r.enableLogging=="boolean"?e.enableLogging=r.enableLogging:e.enableLogging=!1,typeof r.scope=="string"&&(e.scope=r.scope),typeof r.messageReceiveTimeout=="number"&&r.messageReceiveTimeout>0?e.messageReceiveTimeout=r.messageReceiveTimeout:e.messageReceiveTimeout=1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var u=w(),p=w();p.promise.then(function(){e.onReady&&e.onReady(e.authenticated),u.setSuccess(e.authenticated)}).catch(function(m){u.setError(m)});var c=X();function k(){var m=function(A){A||(S.prompt="none"),e.login(S).then(function(){p.setSuccess()}).catch(function(I){p.setError(I)})},g=function(){var A=document.createElement("iframe"),I=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});A.setAttribute("src",I),A.setAttribute("title","keycloak-silent-check-sso"),A.style.display="none",document.body.appendChild(A);var L=function(F){if(!(F.origin!==window.location.origin||A.contentWindow!==F.source)){var M=P(F.data);H(M,p),document.body.removeChild(A),window.removeEventListener("message",L)}};window.addEventListener("message",L)},S={};switch(r.onLoad){case"check-sso":a.enable?D().then(function(){B().then(function(A){A?p.setSuccess():e.silentCheckSsoRedirectUri?g():m(!1)}).catch(function(A){p.setError(A)})}):e.silentCheckSsoRedirectUri?g():m(!1);break;case"login-required":m(!0);break;default:throw"Invalid value for onLoad"}}function d(){var m=P(window.location.href);if(m&&window.history.replaceState(window.history.state,null,m.newUrl),m&&m.valid)return D().then(function(){H(m,p)}).catch(function(g){p.setError(g)});r?r.token&&r.refreshToken?(N(r.token,r.refreshToken,r.idToken),a.enable?D().then(function(){B().then(function(g){g?(e.onAuthSuccess&&e.onAuthSuccess(),p.setSuccess(),J()):p.setSuccess()}).catch(function(g){p.setError(g)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),p.setSuccess()}).catch(function(g){e.onAuthError&&e.onAuthError(),r.onLoad?k():p.setError(g)})):r.onLoad?k():p.setSuccess():p.setSuccess()}function h(){var m=w(),g=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",g),m.setSuccess())};return document.addEventListener("readystatechange",g),g(),m.promise}return c.then(function(){h().then(ee).then(d).catch(function(m){u.setError(m)})}),c.catch(function(m){u.setError(m)}),u.promise},e.login=function(r){return s.login(r)};function _(r){var n=null,u=window.crypto||window.msCrypto;if(u&&u.getRandomValues&&window.Uint8Array)return n=new Uint8Array(r),u.getRandomValues(n),n;n=new Array(r);for(var p=0;p<n.length;p++)n[p]=Math.floor(256*Math.random());return n}function C(r){return b(r,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function b(r,n){for(var u=_(r),p=new Array(r),c=0;c<r;c++)p[c]=n.charCodeAt(u[c]%n.length);return String.fromCharCode.apply(null,p)}function U(r,n){switch(r){case"S256":var u=new Uint8Array(sha256.arrayBuffer(n)),p=base64Js.fromByteArray(u).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"");return p;default:throw"Invalid value for pkceMethod"}}function T(r){var n={id_token:{acr:r}};return JSON.stringify(n)}e.createLoginUrl=function(r){var n=$(),u=$(),p=s.redirectUri(r),c={state:n,nonce:u,redirectUri:encodeURIComponent(p)};r&&r.prompt&&(c.prompt=r.prompt);var k;r&&r.action=="register"?k=e.endpoints.register():k=e.endpoints.authorize();var d=r&&r.scope||e.scope;d?d.indexOf("openid")===-1&&(d="openid "+d):d="openid";var h=k+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(p)+"&state="+encodeURIComponent(n)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(d);if(x&&(h=h+"&nonce="+encodeURIComponent(u)),r&&r.prompt&&(h+="&prompt="+encodeURIComponent(r.prompt)),r&&r.maxAge&&(h+="&max_age="+encodeURIComponent(r.maxAge)),r&&r.loginHint&&(h+="&login_hint="+encodeURIComponent(r.loginHint)),r&&r.idpHint&&(h+="&kc_idp_hint="+encodeURIComponent(r.idpHint)),r&&r.action&&r.action!="register"&&(h+="&kc_action="+encodeURIComponent(r.action)),r&&r.locale&&(h+="&ui_locales="+encodeURIComponent(r.locale)),r&&r.acr){var m=T(r.acr);h+="&claims="+encodeURIComponent(m)}if(e.pkceMethod){var g=C(96);c.pkceCodeVerifier=g;var S=U(e.pkceMethod,g);h+="&code_challenge="+S,h+="&code_challenge_method="+e.pkceMethod}return f.add(c),h},e.logout=function(r){return s.logout(r)},e.createLogoutUrl=function(r){var n=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(s.redirectUri(r,!1));return e.idToken&&(n+="&id_token_hint="+encodeURIComponent(e.idToken)),n},e.register=function(r){return s.register(r)},e.createRegisterUrl=function(r){return r||(r={}),r.action="register",e.createLoginUrl(r)},e.createAccountUrl=function(r){var n=E(),u=void 0;return typeof n!="undefined"&&(u=n+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(s.redirectUri(r))),u},e.accountManagement=function(){return s.accountManagement()},e.hasRealmRole=function(r){var n=e.realmAccess;return!!n&&n.roles.indexOf(r)>=0},e.hasResourceRole=function(r,n){if(!e.resourceAccess)return!1;var u=e.resourceAccess[n||e.clientId];return!!u&&u.roles.indexOf(r)>=0},e.loadUserProfile=function(){var r=E()+"/account",n=new XMLHttpRequest;n.open("GET",r,!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Authorization","bearer "+e.token);var u=w();return n.onreadystatechange=function(){n.readyState==4&&(n.status==200?(e.profile=JSON.parse(n.responseText),u.setSuccess(e.profile)):u.setError())},n.send(),u.promise},e.loadUserInfo=function(){var r=e.endpoints.userinfo(),n=new XMLHttpRequest;n.open("GET",r,!0),n.setRequestHeader("Accept","application/json"),n.setRequestHeader("Authorization","bearer "+e.token);var u=w();return n.onreadystatechange=function(){n.readyState==4&&(n.status==200?(e.userInfo=JSON.parse(n.responseText),u.setSuccess(e.userInfo)):u.setError())},n.send(),u.promise},e.isTokenExpired=function(r){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return y("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var n=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(r){if(isNaN(r))throw"Invalid minValidity";n-=r}return n<0},e.updateToken=function(r){var n=w();if(!e.refreshToken)return n.setError(),n.promise;r=r||5;var u=function(){var c=!1;if(r==-1?(c=!0,y("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(r))&&(c=!0,y("[KEYCLOAK] Refreshing token: token expired")),!c)n.setSuccess(!1);else{var k="grant_type=refresh_token&refresh_token="+e.refreshToken,d=e.endpoints.token();if(o.push(n),o.length==1){var h=new XMLHttpRequest;h.open("POST",d,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.withCredentials=!0,k+="&client_id="+encodeURIComponent(e.clientId);var m=new Date().getTime();h.onreadystatechange=function(){if(h.readyState==4)if(h.status==200){y("[KEYCLOAK] Token refreshed"),m=(m+new Date().getTime())/2;var g=JSON.parse(h.responseText);N(g.access_token,g.refresh_token,g.id_token,m),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var S=o.pop();S!=null;S=o.pop())S.setSuccess(!0)}else{R("[KEYCLOAK] Failed to refresh token"),h.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var S=o.pop();S!=null;S=o.pop())S.setError(!0)}},h.send(k)}}};if(a.enable){var p=B();p.then(function(){u()}).catch(function(c){n.setError(c)})}else u();return n.promise},e.clearToken=function(){e.token&&(N(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function E(){if(typeof e.authServerUrl!="undefined")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function O(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function H(r,n){var u=r.code,p=r.error,c=r.prompt,k=new Date().getTime();if(r.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(r.kc_action_status),p){if(c!="none"){var d={error:p,error_description:r.error_description};e.onAuthError&&e.onAuthError(d),n&&n.setError(d)}else n&&n.setSuccess();return}else e.flow!="standard"&&(r.access_token||r.id_token)&&S(r.access_token,null,r.id_token,!0);if(e.flow!="implicit"&&u){var h="code="+u+"&grant_type=authorization_code",m=e.endpoints.token(),g=new XMLHttpRequest;g.open("POST",m,!0),g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h+="&client_id="+encodeURIComponent(e.clientId),h+="&redirect_uri="+r.redirectUri,r.pkceCodeVerifier&&(h+="&code_verifier="+r.pkceCodeVerifier),g.withCredentials=!0,g.onreadystatechange=function(){if(g.readyState==4)if(g.status==200){var A=JSON.parse(g.responseText);S(A.access_token,A.refresh_token,A.id_token,e.flow==="standard"),J()}else e.onAuthError&&e.onAuthError(),n&&n.setError()},g.send(h)}function S(A,I,L,F){k=(k+new Date().getTime())/2,N(A,I,L,k),x&&(e.tokenParsed&&e.tokenParsed.nonce!=r.storedNonce||e.refreshTokenParsed&&e.refreshTokenParsed.nonce!=r.storedNonce||e.idTokenParsed&&e.idTokenParsed.nonce!=r.storedNonce)?(y("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),n&&n.setError()):F&&(e.onAuthSuccess&&e.onAuthSuccess(),n&&n.setSuccess())}}function X(r){var n=w(),u;t?typeof t=="string"&&(u=t):u="keycloak.json";function p(g){g?e.endpoints={authorize:function(){return g.authorization_endpoint},token:function(){return g.token_endpoint},logout:function(){if(!g.end_session_endpoint)throw"Not supported by the OIDC server";return g.end_session_endpoint},checkSessionIframe:function(){if(!g.check_session_iframe)throw"Not supported by the OIDC server";return g.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!g.userinfo_endpoint)throw"Not supported by the OIDC server";return g.userinfo_endpoint}}:e.endpoints={authorize:function(){return E()+"/protocol/openid-connect/auth"},token:function(){return E()+"/protocol/openid-connect/token"},logout:function(){return E()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var S=E()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(S=S+"?version="+e.iframeVersion),S},thirdPartyCookiesIframe:function(){var S=E()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(S=S+"?version="+e.iframeVersion),S},register:function(){return E()+"/protocol/openid-connect/registrations"},userinfo:function(){return E()+"/protocol/openid-connect/userinfo"}}}if(u){var c=new XMLHttpRequest;c.open("GET",u,!0),c.setRequestHeader("Accept","application/json"),c.onreadystatechange=function(){if(c.readyState==4)if(c.status==200||W(c)){var g=JSON.parse(c.responseText);e.authServerUrl=g["auth-server-url"],e.realm=g.realm,e.clientId=g.resource,p(null),n.setSuccess()}else n.setError()},c.send()}else{if(!t.clientId)throw"clientId missing";e.clientId=t.clientId;var k=t.oidcProvider;if(k)if(typeof k=="string"){var m;k.charAt(k.length-1)=="/"?m=k+".well-known/openid-configuration":m=k+"/.well-known/openid-configuration";var c=new XMLHttpRequest;c.open("GET",m,!0),c.setRequestHeader("Accept","application/json"),c.onreadystatechange=function(){if(c.readyState==4)if(c.status==200||W(c)){var S=JSON.parse(c.responseText);p(S),n.setSuccess()}else n.setError()},c.send()}else p(k),n.setSuccess();else{if(!t.url){for(var d=document.getElementsByTagName("script"),h=0;h<d.length;h++)if(d[h].src.match(/.*keycloak\.js/)){t.url=d[h].src.substr(0,d[h].src.indexOf("/js/keycloak.js"));break}}if(!t.realm)throw"realm missing";e.authServerUrl=t.url,e.realm=t.realm,p(null),n.setSuccess()}}return n.promise}function W(r){return r.status==0&&r.responseText&&r.responseURL.startsWith("file:")}function N(r,n,u,p){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),n?(e.refreshToken=n,e.refreshTokenParsed=j(n)):(delete e.refreshToken,delete e.refreshTokenParsed),u?(e.idToken=u,e.idTokenParsed=j(u)):(delete e.idToken,delete e.idTokenParsed),r){if(e.token=r,e.tokenParsed=j(r),e.sessionId=e.tokenParsed.session_state,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,p&&(e.timeSkew=Math.floor(p/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(y("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var c=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;y("[KEYCLOAK] Token expires in "+Math.round(c/1e3)+" s"),c<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,c)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function j(r){switch(r=r.split(".")[1],r=r.replace(/-/g,"+"),r=r.replace(/_/g,"/"),r.length%4){case 0:break;case 2:r+="==";break;case 3:r+="=";break;default:throw"Invalid token"}return r=decodeURIComponent(escape(atob(r))),r=JSON.parse(r),r}function $(){var r="0123456789abcdef",n=b(36,r).split("");n[14]="4",n[19]=r.substr(n[19]&3|8,1),n[8]=n[13]=n[18]=n[23]="-";var u=n.join("");return u}function P(r){var n=Q(r);if(!!n){var u=f.get(n.state);return u&&(n.valid=!0,n.redirectUri=u.redirectUri,n.storedNonce=u.nonce,n.prompt=u.prompt,n.pkceCodeVerifier=u.pkceCodeVerifier),n}}function Q(r){var n;switch(e.flow){case"standard":n=["code","state","session_state","kc_action_status"];break;case"implicit":n=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status"];break;case"hybrid":n=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status"];break}n.push("error"),n.push("error_description"),n.push("error_uri");var u=r.indexOf("?"),p=r.indexOf("#"),c,k;if(e.responseMode==="query"&&u!==-1?(c=r.substring(0,u),k=q(r.substring(u+1,p!==-1?p:r.length),n),k.paramsString!==""&&(c+="?"+k.paramsString),p!==-1&&(c+=r.substring(p))):e.responseMode==="fragment"&&p!==-1&&(c=r.substring(0,p),k=q(r.substring(p+1),n),k.paramsString!==""&&(c+="#"+k.paramsString)),k&&k.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((k.oauthParams.code||k.oauthParams.error)&&k.oauthParams.state)return k.oauthParams.newUrl=c,k.oauthParams}else if(e.flow==="implicit"&&(k.oauthParams.access_token||k.oauthParams.error)&&k.oauthParams.state)return k.oauthParams.newUrl=c,k.oauthParams}}function q(r,n){for(var u=r.split("&"),p={paramsString:"",oauthParams:{}},c=0;c<u.length;c++){var k=u[c].indexOf("="),d=u[c].slice(0,k);n.indexOf(d)!==-1?p.oauthParams[d]=u[c].slice(k+1):(p.paramsString!==""&&(p.paramsString+="&"),p.paramsString+=u[c])}return p}function w(){var r={setSuccess:function(n){r.resolve(n)},setError:function(n){r.reject(n)}};return r.promise=new Promise(function(n,u){r.resolve=n,r.reject=u}),r.promise.success=function(n){return logPromiseDeprecation(),this.then(function(p){n(p)}),this},r.promise.error=function(n){return logPromiseDeprecation(),this.catch(function(p){n(p)}),this},r}function Z(r,n,u){var p=null,c=new Promise(function(k,d){p=setTimeout(function(){d({error:u||"Promise is not settled within timeout of "+n+"ms"})},n)});return Promise.race([r,c]).finally(function(){clearTimeout(p)})}function D(){var r=w();if(!a.enable||a.iframe)return r.setSuccess(),r.promise;var n=document.createElement("iframe");a.iframe=n,n.onload=function(){var c=e.endpoints.authorize();c.charAt(0)==="/"?a.iframeOrigin=O():a.iframeOrigin=c.substring(0,c.indexOf("/",8)),r.setSuccess()};var u=e.endpoints.checkSessionIframe();n.setAttribute("src",u),n.setAttribute("title","keycloak-session-iframe"),n.style.display="none",document.body.appendChild(n);var p=function(c){if(!(c.origin!==a.iframeOrigin||a.iframe.contentWindow!==c.source)&&(c.data=="unchanged"||c.data=="changed"||c.data=="error")){c.data!="unchanged"&&e.clearToken();for(var k=a.callbackList.splice(0,a.callbackList.length),d=k.length-1;d>=0;--d){var h=k[d];c.data=="error"?h.setError():h.setSuccess(c.data=="unchanged")}}};return window.addEventListener("message",p,!1),r.promise}function J(){a.enable&&e.token&&setTimeout(function(){B().then(function(r){r&&J()})},a.interval*1e3)}function B(){var r=w();if(a.iframe&&a.iframeOrigin){var n=e.clientId+" "+(e.sessionId?e.sessionId:"");a.callbackList.push(r);var u=a.iframeOrigin;a.callbackList.length==1&&a.iframe.contentWindow.postMessage(n,u)}else r.setSuccess();return r.promise}function ee(){var r=w();if(a.enable||e.silentCheckSsoRedirectUri){var n=document.createElement("iframe");n.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),n.setAttribute("title","keycloak-3p-check-iframe"),n.style.display="none",document.body.appendChild(n);var u=function(p){n.contentWindow===p.source&&(p.data!=="supported"&&p.data!=="unsupported"||(p.data==="unsupported"&&(a.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1),R("[KEYCLOAK] 3rd party cookies aren't supported by this browser. checkLoginIframe and silent check-sso are not available.")),document.body.removeChild(n),window.removeEventListener("message",u),r.setSuccess()))};window.addEventListener("message",u,!1)}else r.setSuccess();return Z(r.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function Y(r){if(!r||r=="default")return{login:function(d){return window.location.assign(e.createLoginUrl(d)),w().promise},logout:function(d){return window.location.replace(e.createLogoutUrl(d)),w().promise},register:function(d){return window.location.assign(e.createRegisterUrl(d)),w().promise},accountManagement:function(){var d=e.createAccountUrl();if(typeof d!="undefined")window.location.href=d;else throw"Not supported by the OIDC server";return w().promise},redirectUri:function(d,h){return d&&d.redirectUri?d.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(r=="cordova"){a.enable=!1;var n=function(d,h,m){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(d,h,m):window.open(d,h,m)},u=function(d){return d&&d.cordovaOptions?Object.keys(d.cordovaOptions).reduce(function(h,m){return h[m]=d.cordovaOptions[m],h},{}):{}},p=function(d){return Object.keys(d).reduce(function(h,m){return h.push(m+"="+d[m]),h},[]).join(",")},c=function(d){var h=u(d);return h.location="no",d&&d.prompt=="none"&&(h.hidden="yes"),p(h)},k=e.redirectUri||"http://localhost";return{login:function(d){var h=w(),m=c(d),g=e.createLoginUrl(d),S=n(g,"_blank",m),A=!1,I=!1,L=function(){I=!0,S.close()};return S.addEventListener("loadstart",function(F){if(F.url.indexOf(k)==0){var M=P(F.url);H(M,h),L(),A=!0}}),S.addEventListener("loaderror",function(F){if(!A)if(F.url.indexOf(k)==0){var M=P(F.url);H(M,h),L(),A=!0}else h.setError(),L()}),S.addEventListener("exit",function(F){I||h.setError({reason:"closed_by_user"})}),h.promise},logout:function(d){var h=w(),m=e.createLogoutUrl(d),g=n(m,"_blank","location=no,hidden=yes,clearcache=yes"),S;return g.addEventListener("loadstart",function(A){A.url.indexOf(k)==0&&g.close()}),g.addEventListener("loaderror",function(A){A.url.indexOf(k)==0||(S=!0),g.close()}),g.addEventListener("exit",function(A){S?h.setError():(e.clearToken(),h.setSuccess())}),h.promise},register:function(d){var h=w(),m=e.createRegisterUrl(),g=c(d),S=n(m,"_blank",g);return S.addEventListener("loadstart",function(A){if(A.url.indexOf(k)==0){S.close();var I=P(A.url);H(I,h)}}),h.promise},accountManagement:function(){var d=e.createAccountUrl();if(typeof d!="undefined"){var h=n(d,"_blank","location=no");h.addEventListener("loadstart",function(m){m.url.indexOf(k)==0&&h.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(d){return k}}}if(r=="cordova-native")return a.enable=!1,{login:function(d){var h=w(),m=e.createLoginUrl(d);return universalLinks.subscribe("keycloak",function(g){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var S=P(g.url);H(S,h)}),window.cordova.plugins.browsertab.openUrl(m),h.promise},logout:function(d){var h=w(),m=e.createLogoutUrl(d);return universalLinks.subscribe("keycloak",function(g){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),h.setSuccess()}),window.cordova.plugins.browsertab.openUrl(m),h.promise},register:function(d){var h=w(),m=e.createRegisterUrl(d);return universalLinks.subscribe("keycloak",function(g){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var S=P(g.url);H(S,h)}),window.cordova.plugins.browsertab.openUrl(m),h.promise},accountManagement:function(){var d=e.createAccountUrl();if(typeof d!="undefined")window.cordova.plugins.browsertab.openUrl(d);else throw"Not supported by the OIDC server"},redirectUri:function(d){return d&&d.redirectUri?d.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+r}var z=function(){if(!(this instanceof z))return new z;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var r=this;function n(){for(var u=new Date().getTime(),p=0;p<localStorage.length;p++){var c=localStorage.key(p);if(c&&c.indexOf("kc-callback-")==0){var k=localStorage.getItem(c);if(k)try{var d=JSON.parse(k).expires;(!d||d<u)&&localStorage.removeItem(c)}catch{localStorage.removeItem(c)}}}}r.get=function(u){if(!!u){var p="kc-callback-"+u,c=localStorage.getItem(p);return c&&(localStorage.removeItem(p),c=JSON.parse(c)),n(),c}},r.add=function(u){n();var p="kc-callback-"+u.state;u.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(p,JSON.stringify(u))}},V=function(){if(!(this instanceof V))return new V;var r=this;r.get=function(c){if(!!c){var k=u("kc-callback-"+c);if(p("kc-callback-"+c,"",n(-100)),k)return JSON.parse(k)}},r.add=function(c){p("kc-callback-"+c.state,JSON.stringify(c),n(60))},r.removeItem=function(c){p(c,"",n(-100))};var n=function(c){var k=new Date;return k.setTime(k.getTime()+c*60*1e3),k},u=function(c){for(var k=c+"=",d=document.cookie.split(";"),h=0;h<d.length;h++){for(var m=d[h];m.charAt(0)==" ";)m=m.substring(1);if(m.indexOf(k)==0)return m.substring(k.length,m.length)}return""},p=function(c,k,d){var h=c+"="+k+"; expires="+d.toUTCString()+"; ";document.cookie=h}};function re(){try{return new z}catch{}return new V}function G(r){return function(){e.enableLogging&&r.apply(console,Array.prototype.slice.call(arguments))}}}/*!
  * vue-keycloak-js v2.4.0
  * @license ISC
  */function __awaiter(t,e,s,o){function f(a){return a instanceof s?a:new s(function(v){v(a)})}return new(s||(s=Promise))(function(a,v){function l(R){try{y(o.next(R))}catch(_){v(_)}}function x(R){try{y(o.throw(R))}catch(_){v(_)}}function y(R){R.done?a(R.value):f(R.value).then(l,x)}y((o=o.apply(t,e||[])).next())})}let installed=!1;const KeycloakSymbol=Symbol("keycloak");var index={install:function(t,e={}){return __awaiter(this,void 0,void 0,function*(){if(installed)return;installed=!0;const s={config:window.__BASEURL__?`${window.__BASEURL__}/config`:"/config",init:{onLoad:"login-required"}},o=Object.assign({},s,e);if(assertOptions(o).hasError)throw new Error(`Invalid options given: ${assertOptions(o).error}`);const f=yield vue2AndVue3Reactive(t,defaultEmptyVueKeycloakInstance());getConfig(o.config).then(a=>{init(a,f,o)}).catch(a=>{console.log(a)})})},KeycloakSymbol};function defaultEmptyVueKeycloakInstance(){return{ready:!1,authenticated:!1,userName:null,fullName:null,token:null,tokenParsed:null,logoutFn:null,loginFn:null,login:null,createLoginUrl:null,createLogoutUrl:null,createRegisterUrl:null,register:null,accountManagement:null,createAccountUrl:null,loadUserProfile:null,subject:null,idToken:null,idTokenParsed:null,realmAccess:null,resourceAccess:null,refreshToken:null,refreshTokenParsed:null,timeSkew:null,responseMode:null,responseType:null,hasRealmRole:null,hasResourceRole:null,keycloak:null}}function vue2AndVue3Reactive(t,e){return new Promise((s,o)=>{if(t.prototype)try{const f=t.observable(e);Object.defineProperty(t.prototype,"$keycloak",{get(){return f}}),s(f)}catch(f){o(f)}else{const f=reactive(e);t.config.globalProperties.$keycloak=f,t.provide(KeycloakSymbol,f),s(f)}})}function init(t,e,s){const o=new Keycloak(t),{updateInterval:f}=s;o.onReady=function(v){a(v),e.ready=!0,typeof s.onReady=="function"&&s.onReady(o,e)},o.onAuthSuccess=function(){const v=setInterval(()=>o.updateToken(60).catch(()=>{o.clearToken()}),f!=null?f:1e4);e.logoutFn=()=>{clearInterval(v),o.logout(s.logout)}},o.onAuthRefreshSuccess=function(){a(!0),typeof s.onAuthRefreshSuccess=="function"&&s.onAuthRefreshSuccess(o)},o.onAuthRefreshError=function(){a(!1),typeof s.onAuthRefreshError=="function"&&s.onAuthRefreshError(o)},o.onAuthLogout=function(){a(!1),typeof s.onAuthLogout=="function"&&s.onAuthLogout(o)},o.init(s.init).then(v=>{a(v),typeof s.onInitSuccess=="function"&&s.onInitSuccess(v)}).catch(v=>{a(!1);const l=Error("Failure during initialization of keycloak-js adapter");typeof s.onInitError=="function"?s.onInitError(l,v):console.error(l,v)});function a(v=!1){e.authenticated=v,e.loginFn=o.login,e.login=o.login,e.createLoginUrl=o.createLoginUrl,e.createLogoutUrl=o.createLogoutUrl,e.createRegisterUrl=o.createRegisterUrl,e.register=o.register,e.keycloak=o,v&&(e.accountManagement=o.accountManagement,e.createAccountUrl=o.createAccountUrl,e.hasRealmRole=o.hasRealmRole,e.hasResourceRole=o.hasResourceRole,e.loadUserProfile=o.loadUserProfile,e.token=o.token,e.subject=o.subject,e.idToken=o.idToken,e.idTokenParsed=o.idTokenParsed,e.realmAccess=o.realmAccess,e.resourceAccess=o.resourceAccess,e.refreshToken=o.refreshToken,e.refreshTokenParsed=o.refreshTokenParsed,e.timeSkew=o.timeSkew,e.responseMode=o.responseMode,e.responseType=o.responseType,e.tokenParsed=o.tokenParsed,e.userName=o.tokenParsed.preferred_username,e.fullName=o.tokenParsed.name)}}function assertOptions(t){const{config:e,init:s,onReady:o,onInitError:f,onAuthRefreshError:a,onAuthLogout:v}=t;return typeof e!="string"&&!_isObject(e)?{hasError:!0,error:`'config' option must be a string or an object. Found: '${e}'`}:!_isObject(s)||typeof s.onLoad!="string"?{hasError:!0,error:`'init' option must be an object with an 'onLoad' property. Found: '${s}'`}:o&&typeof o!="function"?{hasError:!0,error:`'onReady' option must be a function. Found: '${o}'`}:f&&typeof f!="function"?{hasError:!0,error:`'onInitError' option must be a function. Found: '${f}'`}:a&&typeof a!="function"?{hasError:!0,error:`'onAuthRefreshError' option must be a function. Found: '${a}'`}:v&&typeof v!="function"?{hasError:!0,error:`'onAuthLogout' option must be a function. Found: '${v}'`}:{hasError:!1,error:null}}function _isObject(t){return t!==null&&typeof t=="object"&&Object.prototype.toString.call(t)!=="[object Array]"}function getConfig(t){return _isObject(t)?Promise.resolve(t):new Promise((e,s)=>{const o=new XMLHttpRequest;o.open("GET",t),o.setRequestHeader("Accept","application/json"),o.onreadystatechange=()=>{o.readyState===4&&(o.status===200?e(JSON.parse(o.responseText)):s(Error(o.statusText)))},o.send()})}const auth=defineStore("keycloak",{state:()=>({UserProfile:{firstName:"",lastName:"",username:""},keycloak:{},isNotClient:!1}),getters:{getName(t){return console.log(this.keycloak),this.UserProfile.firstName!=null?this.UserProfile.firstName.includes("@")?this.UserProfile.firstName.split("@")[0]+" "+this.UserProfile.lastName.split("@")[0]:this.UserProfile.firstName+" "+this.UserProfile.lastName:this.UserProfile.username}},actions:{setKeycloak(t){this.$state.keycloak=t},async setUserProfile(){this.$state.UserProfile=await this.$state.keycloak.loadUserProfile()}}}),store=auth();console.log("KeycloakURL","https://wcdssi.apolloglobal.net:8443/auth");console.log("KeycloakRealm","hive-connect");console.log("KeycloakCLientId","apollo");var keycloak=boot(async({app:t,router:e})=>{async function s(){axios.interceptors.request.use(o=>(o.headers.Authorization=`Bearer ${t.config.globalProperties.$keycloak.token}`,o.url="https://autoprov-test.apolloglobal.net:8081",o),o=>Promise.reject(o))}return localStorage.realm="login",localStorage.realm=="login"?new Promise(o=>{localStorage.realm="",t.use(index,{init:{onLoad:"login-required",checkLoginIframe:!1},config:{url:"https://wcdssi.apolloglobal.net:8443/auth",realm:"hive-connect",clientId:"apollo"},onReady:f=>{s(),store.setKeycloak(f),store.setUserProfile(),console.log(store.keycloak),o()}})}):new Promise(o=>{t.use(index,{init:{onLoad:"check-sso",checkLoginIframe:!1},config:{url:"https://wcdssi.apolloglobal.net:8443/auth",realm:"hive-connect",clientId:"apollo"},onReady:f=>{s(),store.setKeycloak(f),store.setUserProfile(),console.log(store),o()}})})});export{keycloak as default};

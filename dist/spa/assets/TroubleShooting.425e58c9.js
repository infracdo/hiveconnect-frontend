import{Q as T}from"./QAjaxBar.c74e487d.js";import{Q as U,i as j,b as L,a as O}from"./hiveConnect.ab0713ef.js";import{ab as q,r as n,a3 as k,o as P,a5 as d,a6 as M,a7 as l,a8 as t,a9 as a,ag as E,aa as i,aD as f,ad as s,aC as h,aj as g,aQ as x,ac as y,ah as z}from"./index.aa452204.js";import{Q as S}from"./QBanner.250f2e53.js";import{_ as H}from"./plugin-vue_export-helper.21dcd24c.js";import"./rtl.bbffe470.js";const G={class:"select"},F={class:"my-cards"},J={class:""},K={class:""},W={style:{}},X={class:""},Y={class:""},Z={style:{}},R={class:"grafana-main"},ee={key:0,class:"grafana"},ae=["src"],te=q({__name:"TroubleShooting",setup(se){const r=n(""),D=["Stefani_Germanotta_bw1-100.126.0.3","Nica_Cabsagan_bw1-100.126.0.16"],N=n(),p=n(!1),m=n("2d"),Q=n([]),_=n({__name__:"",device_name:"",device_role:"",instance:"",job:"",site_name:"",site_status:"",site_tenant:""}),v=n(""),b=n(""),w="https://dctech-prometheus.apolloglobal.net",A="https://dctech-grafana.apolloglobal.net",V=[{label:"Last 5 minutes",value:"5m"},{label:"Last 15 minutes",value:"15m"},{label:"Last 30 minutes",value:"30m"},{label:"Last 1 hour",value:"1h"},{label:"Last 3 hours",value:"3h"},{label:"Last 6 hours",value:"6h"},{label:"Last 12 hours",value:"12h"},{label:"Last 24 hours",value:"24h"},{label:"Last 2 days",value:"2d"},{label:"Last 90 days",value:"90d"}],o=k({accountNumber:"",clientName:"",ipAssigned:"",onuSerialNumber:"",oltIp:"",onuMacAddress:"",onuDeviceName:"",packageTypeId:"",oltSite:"",oltInterface:""}),C=k({upStream:"",downStream:""}),I=async()=>{const c=await j();Q.value=c.filter(e=>e.onuDeviceName!==null&&e.onuDeviceName.trim()!=="").map(e=>({onuDeviceName:e.onuDeviceName,id:e.id}))},$=async c=>{console.log(c),p.value=!1;const e=N.value;e==null||e.start();const u=await O.get(`${w}/api/v1/query?query=lo_status{job=%22ip_address%22,site_tenant=%22DCTECH%22,device_name="${c}"}`);_.value=u.data.data.result[0].metric,v.value=u.data.data.result[0].value[1];const B=await O.get(`${w}/api/v1/query?query=lo_status{job=%22ip_address%22,site_tenant=%22DCTECH%22,device_name="${_.value.site_name}"}`);b.value=B.data.data.result[0].value[1],e==null||e.stop(),p.value=!0};return P(()=>{I()}),(c,e)=>(d(),M(U,{padding:""},{default:l(()=>[t(T,{color:"secondary",position:"bottom"}),a("div",G,[t(L,{modelValue:r.value,"onUpdate:modelValue":[e[0]||(e[0]=u=>r.value=u),e[1]||(e[1]=u=>$(r.value))],options:D,label:"Select Subscriber",filled:"",class:"select-subscriber","map-option":""},null,8,["modelValue"]),t(L,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=u=>m.value=u),options:V,label:"Select Time",filled:"",class:"select-subscriber","emit-value":"","map-options":""},null,8,["modelValue"]),t(E,{icon:"autorenew",class:"cursor-pointer q-mx-sm",onClick:I,flat:""})]),t(T,{ref_key:"bar",ref:N,color:"info",position:"bottom",size:"10px","skip-hijack":""},null,512),a("div",F,[t(h,null,{default:l(()=>[t(S,{class:"bg-primary text-white"},{default:l(()=>[i(" Client Details ")]),_:1}),t(f,null,{default:l(()=>[a("p",null,"Client Name: "+s(o.clientName),1),a("p",null,"Account Number: "+s(o.accountNumber),1),a("p",null,"Package Type: "+s(o.packageTypeId),1)]),_:1})]),_:1}),t(h,null,{default:l(()=>[t(S,{class:"bg-primary text-white"},{default:l(()=>[i(" ONU Details ")]),_:1}),t(f,null,{default:l(()=>[a("p",J,[i(" ONU Status: "),r.value!==""?(d(),g("span",{key:0,class:x(v.value==="1"?"up":"down")},s(v.value==="1"?"Online":"Offline"),3)):y("",!0)]),a("p",K,[i(" ONU IP: "),a("span",W,s(_.value.instance),1)]),a("p",null,"ONU Serial Number: "+s(o.onuSerialNumber),1),a("p",null,"ONU Mac Address: "+s(o.onuMacAddress),1),a("p",null," upstream: "+s(C.upStream)+" downstream: "+s(C.downStream),1)]),_:1})]),_:1}),t(h,null,{default:l(()=>[t(S,{class:"bg-primary text-white"},{default:l(()=>[i(" OLT Details ")]),_:1}),t(f,null,{default:l(()=>[a("p",X,[i(" OLT Status: "),r.value!==""?(d(),g("span",{key:0,class:x(b.value==="1"?"up":"down")},s(b.value==="1"?"Online":"Offline"),3)):y("",!0)]),a("p",Y,[i(" OLT IP: "),a("span",Z,s(o.oltIp),1)]),a("p",null,"OLT Site: "+s(o.oltSite),1),a("p",null,"OLT Interface: "+s(o.oltInterface),1)]),_:1})]),_:1})]),a("div",R,[p.value?y("",!0):(d(),g("div",ee,[a("div",null,[a("iframe",{src:`${z(A)}/d-solo/d94d1e0e-a6e4-45c4-847f-6603e1c31ccb/subscribers-traffic-rate-and-uptime?orgId=1&from=now-${m.value}&to=now&var-Subscriber=${r.value}&panelId=3`,class:"grafana-panel",frameborder:"0"},null,8,ae)])]))])]),_:1}))}});var ce=H(te,[["__scopeId","data-v-7844d71a"]]);export{ce as default};

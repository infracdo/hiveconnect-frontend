import{Q as T}from"./QAjaxBar.e281b845.js";import{Q as U,h as A,a as k}from"./hiveConnect.e93c26d4.js";import{a3 as B,X as P,r as u,V as x,o as $,Y as d,Z as j,_ as o,$ as a,ah as e,a5 as M,a6 as p,a1 as i,a2 as s,ar as C,a0 as _}from"./index.02e8a7e6.js";import{Q as f}from"./QBanner.6fb5c4ca.js";import{a as h,Q as y}from"./QCard.e731b44d.js";import{a as q}from"./axios.66c02ff4.js";import"./QItem.45c54daf.js";const z={class:"select"},E={key:0,class:"my-cards"},G={class:""},H={class:""},X={style:{}},Y={class:""},Z={class:""},F={style:{}},J={class:"grafana-main"},K={key:0,class:"grafana"},W=["src"],R=P({__name:"TroubleShooting",setup(ee){const r=u({label:"",id:0}),D=["Stefani_Germanotta_bw1-100.126.0.3"],S=u(),v=u(!1),m=u("2d"),O=u([]),N=u({__name__:"",device_name:"",device_role:"",instance:"",job:"",site_name:"",site_status:"",site_tenant:""}),b=u(""),g=u(""),Q=[{label:"Last 5 minutes",value:"5m"},{label:"Last 15 minutes",value:"15m"},{label:"Last 30 minutes",value:"30m"},{label:"Last 1 hour",value:"1h"},{label:"Last 3 hours",value:"3h"},{label:"Last 6 hours",value:"6h"},{label:"Last 12 hours",value:"12h"},{label:"Last 24 hours",value:"24h"},{label:"Last 2 days",value:"2d"},{label:"Last 90 days",value:"90d"}],n=x({accountNumber:"",clientName:"",ipAssigned:"",onuSerialNumber:"",oltIp:"",onuMacAddress:"",onuDeviceName:"",packageTypeId:"",oltSite:"",oltInterface:""}),w=x({upStream:"",downStream:""}),I=async()=>{const c=await A();O.value=c.filter(t=>t.onuDeviceName!==null&&t.onuDeviceName.trim()!=="").map(t=>({onuDeviceName:t.onuDeviceName,id:t.id}))},V=async(c,t)=>{console.log(c);const l=S.value;l==null||l.start();const L=await q.get(`http://172.91.10.129:9090/api/v1/query?query=lo_status{job=%22ip_address%22,site_tenant=%22DCTECH%22,device_name="${c}"}`);N.value=L.data.data.result[0].metric,b.value=L.data.data.result[0].value[1],l==null||l.stop(),v.value=!0};return $(()=>{I()}),(c,t)=>(d(),j(U,{padding:""},{default:o(()=>[a(T,{color:"secondary",position:"bottom"}),e("div",z,[a(k,{modelValue:r.value,"onUpdate:modelValue":[t[0]||(t[0]=l=>r.value=l),t[1]||(t[1]=l=>V(r.value,r.value.id))],options:D,label:"Select Subscriber",filled:"",class:"select-subscriber","map-option":""},null,8,["modelValue"]),a(k,{modelValue:m.value,"onUpdate:modelValue":t[2]||(t[2]=l=>m.value=l),options:Q,label:"Select Time",filled:"",class:"select-subscriber","emit-value":"","map-options":""},null,8,["modelValue"]),a(M,{icon:"autorenew",class:"cursor-pointer q-mx-sm",onClick:I,flat:""})]),a(T,{ref_key:"bar",ref:S,color:"info",position:"bottom",size:"10px","skip-hijack":""},null,512),v.value?(d(),p("div",E,[a(y,null,{default:o(()=>[a(f,{class:"bg-primary text-white"},{default:o(()=>[i(" Client Details ")]),_:1}),a(h,null,{default:o(()=>[e("p",null,"Client Name: "+s(n.clientName),1),e("p",null,"Account Number: "+s(n.accountNumber),1),e("p",null,"Package Type: "+s(n.packageTypeId),1)]),_:1})]),_:1}),a(y,null,{default:o(()=>[a(f,{class:"bg-primary text-white"},{default:o(()=>[i(" ONU Details ")]),_:1}),a(h,null,{default:o(()=>[e("p",G,[i(" ONU Status: "),r.value.label!==""?(d(),p("span",{key:0,class:C(b.value==="1"?"up":"down")},s(b.value==="1"?"UP":"Down"),3)):_("",!0)]),e("p",H,[i(" ONU IP: "),e("span",X,s(N.value.instance),1)]),e("p",null,"ONU Serial Number: "+s(n.onuSerialNumber),1),e("p",null,"ONU Mac Address: "+s(n.onuMacAddress),1),e("p",null," upstream: "+s(w.upStream)+" downstream: "+s(w.downStream),1)]),_:1})]),_:1}),a(y,null,{default:o(()=>[a(f,{class:"bg-primary text-white"},{default:o(()=>[i(" OLT Details ")]),_:1}),a(h,null,{default:o(()=>[e("p",Y,[i(" OLT Status: "),r.value.label!==""?(d(),p("span",{key:0,class:C(g.value==="1"?"up":"down")},s(g.value==="1"?"UP":"Down"),3)):_("",!0)]),e("p",Z,[i(" OLT IP: "),e("span",F,s(n.oltIp),1)]),e("p",null,"OLT Site: "+s(n.oltSite),1),e("p",null,"OLT Interface: "+s(n.oltInterface),1)]),_:1})]),_:1})])):_("",!0),e("div",J,[v.value&&m.value!==""?(d(),p("div",K,[e("div",null,[e("iframe",{src:`http://172.91.10.151:3000/d-solo/d94d1e0e-a6e4-45c4-847f-6603e1c31ccb/subscribers-traffic-rate-and-uptime?orgId=1&from=now-${m.value}&to=now&var-Subscriber=${r.value}&panelId=3`,class:"grafana-panel",frameborder:"0"},null,8,W)])])):_("",!0)])]),_:1}))}});var re=B(R,[["__scopeId","data-v-66284e16"]]);export{re as default};

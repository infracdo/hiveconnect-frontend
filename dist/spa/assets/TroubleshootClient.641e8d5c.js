import{c as fe,r as N,a as M,w as F,e as X,A as Y,u as Z,P as pe,h as J,al as ve,g as ge,d as be,B as he,at as _e,j as ye,au as Se,X as we,af as Ne,V as ee,Y as te,Z as ae,_ as s,$ as o,ah as a,a1 as w,a2 as i,an as le,a5 as Te,a0 as Ie,ai as Pe,as as ke,a3 as Oe,aj as Ce,ak as Ae}from"./index.d82d268e.js";import{u as De,i as Le,v as oe,j as xe,k as Me,l as Qe,m as Ee,n as je,r as ne,s as qe,p as se,o as Ve,Q as Be,a as Ue,c as He,f as Re,q as $e,t as We,w as ze}from"./hiveConnect.d7a0e9c7.js";import{u as Fe,b as Ge,k as Ke,e as Xe,f as Ye,c as ie}from"./QItem.834385e7.js";import{a as Ze,Q as W}from"./QBanner.16f05715.js";import{Q,a as z}from"./QCard.535ca0f4.js";import{Q as Je}from"./QCardActions.a5939c1e.js";import{a as re}from"./axios.66c02ff4.js";var ft=fe({name:"QTooltip",inheritAttrs:!1,props:{...De,...Fe,...Le,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{default:"jump-down"},transitionHide:{default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:oe},self:{type:String,default:"top middle",validator:oe},offset:{type:Array,default:()=>[14,14],validator:xe},scrollTarget:{default:void 0},delay:{type:Number,default:0},hideDelay:{type:Number,default:0}},emits:[...Ge],setup(e,{slots:P,emit:g,attrs:T}){let u,f;const b=ge(),{proxy:{$q:n}}=b,d=N(null),p=N(!1),t=M(()=>se(e.anchor,n.lang.rtl)),I=M(()=>se(e.self,n.lang.rtl)),E=M(()=>e.persistent!==!0),{registerTick:j,removeTick:q}=Ke(),{registerTimeout:h}=Xe(),{transitionProps:m,transitionStyle:v}=Me(e),{localScrollTarget:c,changeScrollEvent:k,unconfigureScrollTarget:V}=Qe(e,G),{anchorEl:r,canShow:B,anchorEvents:_}=Ee({showing:p,configureAnchorEl:ce}),{show:U,hide:O}=Ye({showing:p,canShow:B,handleShow:L,handleHide:C,hideOnRouteChange:E,processOnMount:!0});Object.assign(_,{delayShow:R,delayHide:ue});const{showPortal:A,hidePortal:D,renderPortal:H}=je(b,d,me,"tooltip");if(n.platform.is.mobile===!0){const l={anchorEl:r,innerRef:d,onClickOutside(S){return O(S),S.target.classList.contains("q-dialog__backdrop")&&he(S),!0}},$=M(()=>e.modelValue===null&&e.persistent!==!0&&p.value===!0);F($,S=>{(S===!0?Ve:ne)(l)}),X(()=>{ne(l)})}function L(l){A(),j(()=>{f=new MutationObserver(()=>y()),f.observe(d.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),y(),G()}),u===void 0&&(u=F(()=>n.screen.width+"|"+n.screen.height+"|"+e.self+"|"+e.anchor+"|"+n.lang.rtl,y)),h(()=>{A(!0),g("show",l)},e.transitionDuration)}function C(l){q(),D(),x(),h(()=>{D(!0),g("hide",l)},e.transitionDuration)}function x(){f!==void 0&&(f.disconnect(),f=void 0),u!==void 0&&(u(),u=void 0),V(),Y(_,"tooltipTemp")}function y(){qe({targetEl:d.value,offset:e.offset,anchorEl:r.value,anchorOrigin:t.value,selfOrigin:I.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function R(l){if(n.platform.is.mobile===!0){ie(),document.body.classList.add("non-selectable");const $=r.value,S=["touchmove","touchcancel","touchend","click"].map(K=>[$,K,"delayHide","passiveCapture"]);Z(_,"tooltipTemp",S)}h(()=>{U(l)},e.delay)}function ue(l){n.platform.is.mobile===!0&&(Y(_,"tooltipTemp"),ie(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),h(()=>{O(l)},e.hideDelay)}function ce(){if(e.noParentEvent===!0||r.value===null)return;const l=n.platform.is.mobile===!0?[[r.value,"touchstart","delayShow","passive"]]:[[r.value,"mouseenter","delayShow","passive"],[r.value,"mouseleave","delayHide","passive"]];Z(_,"anchor",l)}function G(){if(r.value!==null||e.scrollTarget!==void 0){c.value=pe(r.value,e.scrollTarget);const l=e.noParentEvent===!0?y:O;k(c.value,l)}}function de(){return p.value===!0?J("div",{...T,ref:d,class:["q-tooltip q-tooltip--style q-position-engine no-pointer-events",T.class],style:[T.style,v.value],role:"tooltip"},be(P.default)):null}function me(){return J(ve,m.value,de)}return X(x),Object.assign(b.proxy,{updatePosition:y}),H}});const pt=_e("subsciber",{state:()=>({subscriberDetail:{subscriber_name:"",serial_number:"",acc_no:"",package_type:"",ssid:"",password:"",mode:"",olt_ip:"",olt_interface:""},modalIsOpen:!1,subscribercolumns:[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"accountNumber",label:"Account No.",field:"accountNumber",align:"left",sortable:!0},{name:"clientName",label:"Client Name",field:"clientName",align:"left",sortable:!0},{name:"onuDeviceName",label:"Device Name",field:"onuDeviceName",align:"left",sortable:!0},{name:"ipAssigned",label:"IP Assigned",field:"ipAssigned",align:"left",sortable:!0},{name:"onuSerialNumber",label:"ONU Serial Number",field:"onuSerialNumber",align:"left",sortable:!0},{name:"onuMacAddress",label:"ONU Mac Address",field:"onuMacAddress",align:"left",sortable:!0},{name:"oltIp",label:"OLT IP",field:"oltIp",align:"left",sortable:!0},{name:"packageTypeId",label:"Package Type ID",field:"packageTypeId",align:"left",sortable:!0},{name:"ssidName",label:"SSID",field:"ssidName",align:"left",sortable:!0},{name:"ssidPw",label:"Password",field:"ssidPw",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"center"}]})});function et(){return ye(Se)}const tt=e=>(Ce("data-v-118d95c6"),e=e(),Ae(),e),at={class:"provision-info"},lt=tt(()=>a("br",null,null,-1)),ot=["src"],nt=we({__name:"TroubleshootClient",props:{confirm:{type:Boolean},closeModal:{type:Function},deviceName:{},clientId:{}},setup(e){const P=et(),g=e,T=N(!1),{confirm:u}=Ne(g),f=()=>{g.closeModal()},b=N({__name__:"",device_name:"",device_role:"",instance:"",job:"",site_name:"",site_status:"",site_tenant:"",olt_ip:""}),n=N("2d"),d=N(""),p=N(""),t=ee({accountNumber:"",clientName:"",ipAssigned:"",onuSerialNumber:"",oltIp:"",onuMacAddress:"",onuDeviceName:"",packageTypeId:"",oltSite:"",oltInterface:""}),I=ee({upStream:"",downStream:""}),E=[{label:"Last 5 minutes",value:"5m"},{label:"Last 15 minutes",value:"15m"},{label:"Last 30 minutes",value:"30m"},{label:"Last 1 hour",value:"1h"},{label:"Last 3 hours",value:"3h"},{label:"Last 6 hours",value:"6h"},{label:"Last 12 hours",value:"12h"},{label:"Last 24 hours",value:"24h"},{label:"Last 2 days",value:"2d"},{label:"Last 90 days",value:"90d"}],j=()=>{P.notify({message:"Gathering SNMP Data! Please wait for a moment.",color:"warning",position:"top"})},q=async(m,v)=>{console.log(m),P.loading.show();try{if(!m){h();return}const c=await re.get(`http://172.91.10.129:9090/api/v1/query?query=lo_status{job=%22ip_address%22,site_tenant=%22DCTECH%22,device_name="${m}"}`);b.value=c.data.data.result[0].metric,d.value=c.data.data.result[0].value[1];const k=b.value.olt_ip,V=await re.get(`http://172.91.10.129:9090/api/v1/query?query=lo_status{job=%22ip_address%22,site_tenant=%22DCTECH%22,device_name="OLT-${k}"}`);console.log(k),p.value=V.data.data.result[0].value[1];const r=await Re(v);if(r){const{accountNumber:_,clientName:U,ipAssigned:O,onuDeviceName:A,onuMacAddress:D,onuSerialNumber:H,packageTypeId:L}=r;t.accountNumber=_,t.clientName=U,t.ipAssigned=O,t.oltIp=k,t.onuDeviceName=A,t.onuMacAddress=D,t.onuSerialNumber=H,t.packageTypeId=L;try{const C=await $e(t.oltIp);t.oltSite=C.olt_name;const x=await We(L),{upstream:y,downstream:R}=x;I.upStream=y,I.downStream=R}catch(C){throw C}}else throw new Error("Error fetching client data");const B=await ze(m);t.oltInterface=B,console.log(t.oltInterface),T.value=!0}catch(c){console.log(c),h()}P.loading.hide()},h=()=>{f(),j()};return F(u,m=>{u.value===!0&&q(g.deviceName,g.clientId)}),(m,v)=>(te(),ae(Be,null,{default:s(()=>[o(Ze,{ref:"bar",color:"info",position:"bottom",size:"10px","skip-hijack":""},null,512),o(He,{modelValue:Pe(u),"onUpdate:modelValue":v[1]||(v[1]=c=>ke(u)?u.value=c:null),persistent:"","transition-show":"flip-down","transition-hide":"flip-up"},{default:s(()=>[T.value?(te(),ae(Q,{key:0,class:"dialog-content"},{default:s(()=>[a("div",at,[o(Q,null,{default:s(()=>[o(W,{class:"bg-primary text-white"},{default:s(()=>[w(" Client Details ")]),_:1}),o(z,null,{default:s(()=>[a("p",null,"Client Name: "+i(t.clientName),1),a("p",null,"Account Number: "+i(t.accountNumber),1),a("p",null,"Package Type: "+i(t.packageTypeId),1)]),_:1})]),_:1}),o(Q,null,{default:s(()=>[o(W,{class:"bg-primary text-white"},{default:s(()=>[w(" ONU Details ")]),_:1}),o(z,null,{default:s(()=>[a("p",null,[w(" ONU Status: "),a("span",{style:le(d.value==="1"?"color: green":"color: red")},i(d.value==="1"?"UP":"Down"),5)]),a("p",null,"ONU IP: "+i(b.value.instance),1),a("p",null,"ONU Serial Number: "+i(t.onuSerialNumber),1),a("p",null,"ONU Mac Address: "+i(t.onuMacAddress),1),a("p",null,[w(" upstream: "+i(I.upStream)+" kbps ",1),lt,w(" downstream: "+i(I.downStream)+" kbps ",1)])]),_:1})]),_:1}),o(Q,null,{default:s(()=>[o(W,{class:"bg-primary text-white"},{default:s(()=>[w(" OLT Details ")]),_:1}),o(z,null,{default:s(()=>[a("p",null,[w(" OLT Status: "),a("span",{style:le(p.value==="1"?"color: green":"color: red")},i(p.value==="1"?"UP":"Down"),5)]),a("p",null," OLT IP: "+i(t.oltIp),1),a("p",null,"OLT Site: "+i(t.oltSite),1),a("p",null,"OLT Interface: "+i(t.oltInterface),1)]),_:1})]),_:1})]),o(Ue,{modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=c=>n.value=c),options:E,label:"Select Time",filled:"",class:"select-time q-py-md","emit-value":"","map-options":""},null,8,["modelValue"]),a("iframe",{src:`http://172.91.10.151:3000/d-solo/d94d1e0e-a6e4-45c4-847f-6603e1c31ccb/subscribers-traffic-rate-and-uptime?orgId=1&from=now-${n.value}&to=now&var-Subscriber=${m.deviceName}&panelId=3`,class:"grafana-panel",frameborder:"0"},null,8,ot),o(Je,{vertical:"",align:"right"},{default:s(()=>[o(Te,{filled:"",label:"Close",color:"red",onClick:f})]),_:1})]),_:1})):Ie("",!0)]),_:1},8,["modelValue"])]),_:1}))}});var vt=Oe(nt,[["__scopeId","data-v-118d95c6"]]);export{ft as Q,vt as T,et as a,pt as u};

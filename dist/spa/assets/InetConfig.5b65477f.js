import{Q as D,a as M}from"./QBtn.0aa8684d.js";import{Q as v,u as se,e as te,g as oe,a as ne,b as ie,c as R}from"./networkAddressAPIs.22539768.js";import{Q as K,a as U,b as re,c as de}from"./QTable.cd95060c.js";import{Q as P}from"./QPage.a19e1f88.js";import{Y as ue,c as E,h as $,g as ce,_ as W,D as x,Z as j,r as m,B as H,$ as O,E as Q,F as T,G as r,H as l,Q as S,a0 as y,J as N,K as A,a1 as J,a2 as Y,a3 as me}from"./index.75f6d34d.js";import{Q as Z,a as B,b as F,c as z}from"./QCard.00f73adf.js";import{c as pe,h as q}from"./render.543f4f3c.js";import{a as be,d as fe}from"./QItem.6734a3ac.js";import{a as I}from"./axios.a596eead.js";import{g as ve}from"./rougeDevicesApi.5cc28da0.js";const X=ue("subsciber",{state:()=>({subscriberDetail:{subscriber_name:"",serial_number:"",acc_no:"",package_type:"",ssid:"",password:"",mode:"",olt_ip:"",olt_interface:""},modalIsOpen:!1,subscribercolumns:[{name:"id",label:"ID",field:"id",align:"left",sortable:!0},{name:"account_No",label:"Account No.",field:"account_No",align:"left",sortable:!0},{name:"client_name",label:"Client Name",field:"client_name",align:"left",sortable:!0},{name:"ip_assigned",label:"IP Assigned",field:"ip_assigned",align:"left",sortable:!0},{name:"onu_serial_no",label:"ONU Serial Number",field:"onu_serial_no",align:"left",sortable:!0},{name:"onu_mac_address",label:"ONU Mac Address",field:"onu_mac_address",align:"left",sortable:!0},{name:"olt_ip",label:"OLT IP",field:"olt_ip",align:"left",sortable:!0},{name:"package_type_id",label:"Package Type ID",field:"package_type_id",align:"left",sortable:!0},{name:"actions",label:"Actions",field:"",align:"left"}]})});var ee=pe({name:"QBanner",props:{...be,inlineActions:Boolean,dense:Boolean,rounded:Boolean},setup(u,{slots:c}){const{proxy:{$q:d}}=ce(),_=fe(u,d),g=E(()=>"q-banner row items-center"+(u.dense===!0?" q-banner--dense":"")+(_.value===!0?" q-banner--dark q-dark":"")+(u.rounded===!0?" rounded-borders":"")),b=E(()=>`q-banner__actions row items-center justify-end col-${u.inlineActions===!0?"auto":"all"}`);return()=>{const e=[$("div",{class:"q-banner__avatar col-auto row items-center self-start"},q(c.avatar)),$("div",{class:"q-banner__content col text-body2"},q(c.default))],p=q(c.action);return p!==void 0&&e.push($("div",{class:b.value},p)),$("div",{class:g.value+(u.inlineActions===!1&&p!==void 0?" q-banner--top-padding":""),role:"alert"},e)}}});const C=u=>(J("data-v-704e4894"),u=u(),Y(),u),_e={class:""},ge={class:""},we={class:"q-gutter-sm"},Ve=C(()=>y("br",null,null,-1)),ye=C(()=>y("br",null,null,-1)),Ie=C(()=>y("br",null,null,-1)),Ne=C(()=>y("br",null,null,-1)),Ae=C(()=>y("br",null,null,-1)),Se="http://127.0.0.1:8000",L="http://172.91.0.136:7547",G="http://172.91.10.108:8080",Me=x({__name:"SubscriberModal",props:["dataId","getSubsribers"],setup(u){const c=u;I.defaults.timeout=0;const d=X(),{dataId:_}=j(c),g=m(""),b=m(""),e=m(""),p=m(""),w=m(""),V=m(""),i=m(""),s=m(""),t=m(""),f=m(!0),o=H({subscriber:"",configureSsid:"",setBandwidth:"",runAnsible:"",wanConfig:""});O(()=>{g.value=d.$state.subscriberDetail.acc_no,b.value=d.$state.subscriberDetail.subscriber_name,e.value=d.$state.subscriberDetail.package_type,p.value=d.$state.subscriberDetail.serial_number,w.value=d.$state.subscriberDetail.olt_ip,V.value=d.$state.subscriberDetail.olt_interface,i.value=d.$state.subscriberDetail.mode,s.value=d.$state.subscriberDetail.ssid,t.value=d.$state.subscriberDetail.password});const k=["0/1:1","0/1:2","0/1:3","0/2:1","0/2:2","0/2:3","0/3:1","0/3:2","0/3:3"],ae=()=>{d.$state.modalIsOpen=!d.$state.modalIsOpen},le=async h=>{await I.put(`${Se}/api/subscriber_test/${h}/edit`,{acc_no:g.value,subscriber_name:b.value,serial_number:p.value,olt_ip:w.value,olt_interface:V.value,package_type:e.value,mode:i.value,ssid:s.value,password:t.value}).then(a=>{o.subscriber=a.data,c.getSubsribers()}).catch(a=>{o.subscriber=a}),await I.post(`${L}/configureSSID`,{SN:p.value,NewSSID:i.value==="Bridged"?"":s.value,Password:t.value}).then(a=>{o.configureSsid=a.data}).catch(a=>{o.configureSsid=a}),await I.post(`${L}/bridgedWanConfig`,{SN:p.value}).then(a=>{o.wanConfig=a.data}).catch(a=>{o.wanConfig=a}),await I.post(G+"/setBandwidth").then(a=>{if(a.data)o.setBandwidth="Bandwidth Config Success!";else throw new Error("Something went wrong!")}).catch(a=>{o.setBandwidth=a}),await I.post(G+"/runPlaybook").then(a=>{if(a.data)o.runAnsible="Successfull Setup!";else throw new Error("Something went wrong!")}).catch(a=>{o.runAnsible=a})};return(h,a)=>(Q(),T(P,null,{default:r(()=>[l(K,{modelValue:S(d).$state.modalIsOpen,"onUpdate:modelValue":a[12]||(a[12]=n=>S(d).$state.modalIsOpen=n),modelModifiers:{trim:!0}},{default:r(()=>[l(Z,null,{default:r(()=>[l(B,{class:"flex-subscriber"},{default:r(()=>[y("div",_e,[l(v,{modelValue:g.value,"onUpdate:modelValue":a[0]||(a[0]=n=>g.value=n),modelModifiers:{trim:!0},outlined:"",label:"Account No.",class:"q-ma-md",disable:""},null,8,["modelValue"]),l(v,{modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=n=>b.value=n),modelModifiers:{trim:!0},outlined:"",label:"Subscriber Name",class:"q-ma-md",disable:""},null,8,["modelValue"]),l(v,{modelValue:e.value,"onUpdate:modelValue":a[2]||(a[2]=n=>e.value=n),modelModifiers:{trim:!0},outlined:"",label:"Package Type",class:"q-ma-md",disable:""},null,8,["modelValue"]),l(v,{modelValue:p.value,"onUpdate:modelValue":a[3]||(a[3]=n=>p.value=n),modelModifiers:{trim:!0},outlined:"",label:"Serial Number",class:"q-ma-md"},null,8,["modelValue"]),l(U,{modelValue:w.value,"onUpdate:modelValue":a[4]||(a[4]=n=>w.value=n),modelModifiers:{trim:!0},filled:"",options:["172.16.0.2","172.16.0.58","172.16.0.22"],label:"OLT IP",class:"q-ma-md"},null,8,["modelValue"])]),y("div",ge,[l(U,{modelValue:V.value,"onUpdate:modelValue":a[5]||(a[5]=n=>V.value=n),modelModifiers:{trim:!0},filled:"",options:k,label:"OLT Interface",class:"q-ma-md"},null,8,["modelValue"]),l(re,{filled:"",label:"Mode","stack-label":"",class:"q-ma-md"},{control:r(()=>[y("div",we,[l(F,{modelValue:i.value,"onUpdate:modelValue":a[6]||(a[6]=n=>i.value=n),modelModifiers:{trim:!0},dense:"",val:"Bridged",label:"Bridged"},null,8,["modelValue"]),l(F,{modelValue:i.value,"onUpdate:modelValue":a[7]||(a[7]=n=>i.value=n),modelModifiers:{trim:!0},dense:"",val:"Routed",label:"Routed"},null,8,["modelValue"])])]),_:1}),l(v,{modelValue:s.value,"onUpdate:modelValue":a[8]||(a[8]=n=>s.value=n),modelModifiers:{trim:!0},outlined:"",class:"q-ma-md",label:"SSID"},null,8,["modelValue"]),l(v,{modelValue:t.value,"onUpdate:modelValue":a[10]||(a[10]=n=>t.value=n),modelModifiers:{trim:!0},outlined:"",class:"q-ma-md",label:"Password",type:f.value?"password":"text"},{append:r(()=>[l(D,{name:f.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[9]||(a[9]=n=>f.value=!f.value)},null,8,["name"])]),_:1},8,["modelValue","type"])])]),_:1}),l(z,{align:"left"},{default:r(()=>[l(M,{flat:"",label:"Update Info",color:"secondary",onClick:a[11]||(a[11]=n=>le(S(_)))}),l(M,{flat:"",label:"Close",color:"primary",onClick:ae})]),_:1}),l(ee,{class:"bg-primary text-white"},{default:r(()=>[N(" Subscriber Details: "+A(o.subscriber)+" ",1),Ve,N(" SSID/Password Config: "+A(o.configureSsid)+" ",1),ye,N(" Wan Config: "+A(o.wanConfig)+" ",1),Ie,N(" Bandwidth: "+A(o.setBandwidth)+" ",1),Ne,N(" Playbook: "+A(o.runAnsible)+" ",1),Ae]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var ke=W(Me,[["__scopeId","data-v-704e4894"]]);const Ce=u=>(J("data-v-e9839730"),u=u(),Y(),u),$e=Ce(()=>y("div",{class:"text-h6"},"For Provisioning",-1)),De=x({__name:"AddNewClient",props:{isOpen:{type:Boolean},serialAndMac:{},client:{},closeModal:{type:Function}},setup(u){const c=u,{isOpen:d}=j(c),_=()=>{c.closeModal()},g=[{label:"Gusa 1",value:"172.16.0.2"},{label:"Gusa 2",value:"172.16.0.10"}],b=m("");m();const e=H({clientId:0,accountNumber:"",packageType:"",serialAndMac:{serialNum:{label:"",idx:0},macAddress:""},oltIp:{},ipAssign:"",clientName:""});O(()=>{var i,s,t,f,o,k;e.clientId=(i=c.client)==null?void 0:i.id,e.accountNumber=(s=c.client)==null?void 0:s.account_No,e.clientName=(t=c.client)==null?void 0:t.client_name,e.ipAssign=(f=c.client)==null?void 0:f.ip_assigned,e.oltIp=(o=c.client)==null?void 0:o.olt_ip,e.packageType=(k=c.client)==null?void 0:k.package_type_id});const p=async()=>{console.log(e);try{await se(e.clientId,e.ipAssign,e.serialAndMac.serialNum.label,e.oltIp.value,e.serialAndMac.macAddress)&&(b.value="Successfull Provision!")}catch(i){b.value="Unsuccessful client Update: "+i}try{const i=await te(e.accountNumber,e.clientName,e.serialAndMac.serialNum.label,e.serialAndMac.macAddress,e.ipAssign,e.oltIp.value,e.packageType);b.value=i}catch{throw new Error("Provoision Not complete")}},w=async()=>{const[i]=await oe(),{ipAddress:s}=i;e.ipAssign=s},V=async()=>{e.serialAndMac.macAddress=c.serialAndMac[e.serialAndMac.serialNum.idx].mac_address};return(i,s)=>(Q(),T(P,null,{default:r(()=>[l(K,{modelValue:S(d),"onUpdate:modelValue":s[7]||(s[7]=t=>me(d)?d.value=t:null)},{default:r(()=>[l(Z,null,{default:r(()=>[l(B,null,{default:r(()=>[$e]),_:1}),l(B,{class:"q-pt-none flex-client"},{default:r(()=>[l(v,{modelValue:e.accountNumber,"onUpdate:modelValue":s[0]||(s[0]=t=>e.accountNumber=t),filled:"",label:"Account Number",readonly:""},null,8,["modelValue"]),l(v,{modelValue:e.clientName,"onUpdate:modelValue":s[1]||(s[1]=t=>e.clientName=t),filled:"",label:"Client Name",readonly:""},null,8,["modelValue"]),l(v,{modelValue:e.ipAssign,"onUpdate:modelValue":s[2]||(s[2]=t=>e.ipAssign=t),filled:"",label:"IP Assign",readonly:""},{append:r(()=>[l(D,{name:"add",class:"cursor-pointer",onClick:w})]),_:1},8,["modelValue"]),l(v,{modelValue:e.packageType,"onUpdate:modelValue":s[3]||(s[3]=t=>e.packageType=t),filled:"",label:"Package Type",readonly:""},null,8,["modelValue"]),l(U,{outlined:"",modelValue:e.serialAndMac.serialNum,"onUpdate:modelValue":s[4]||(s[4]=t=>e.serialAndMac.serialNum=t),options:i.serialAndMac.map((t,f)=>({label:t.serial_number,idx:f})),label:"ONU Seriual Number"},null,8,["modelValue","options"]),l(v,{modelValue:e.serialAndMac.macAddress,"onUpdate:modelValue":s[5]||(s[5]=t=>e.serialAndMac.macAddress=t),filled:"",label:"ONU Mac Address",readonly:""},{append:r(()=>[l(D,{name:"add",class:"cursor-pointer",onClick:V})]),_:1},8,["modelValue"]),l(U,{outlined:"",modelValue:e.oltIp,"onUpdate:modelValue":s[6]||(s[6]=t=>e.oltIp=t),options:g,label:"OLT"},null,8,["modelValue"]),l(z,{align:"right"},{default:r(()=>[l(M,{flat:"",label:"OK",color:"primary",onClick:p}),l(M,{flat:"",label:"close",color:"primary",onClick:_})]),_:1})]),_:1}),l(ee,{class:"bg-primary text-white"},{default:r(()=>[N(" Response: "+A(b.value),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}))}});var Ue=W(De,[["__scopeId","data-v-e9839730"]]);const Fe=x({__name:"InetConfig",setup(u){const c=X(),d=m(),_=m([]),g=m(""),b=c.$state.subscribercolumns,e=m(!1);let p=[];const w=m(),V=async t=>{e.value=!e.value,p=(await ve()).map(o=>({serial_number:o.serial_number,mac_address:o.mac_address})),w.value=await ie(t)},i=()=>{e.value=!e.value},s=async()=>{_.value=[],_.value=await R()};return O(async()=>{_.value=await R()}),(t,f)=>(Q(),T(P,{padding:""},{default:r(()=>[l(de,{rows:_.value,title:"For Provision","row-key":"name",columns:S(b),loading:!(_.value.length>0),pagination:{rowsPerPage:10},dense:t.$q.screen.lt.md},{"body-cell-actions":r(o=>[l(ne,{props:o},{default:r(()=>[l(M,{dense:"",round:"",flat:"",icon:"assignment",onClick:k=>V(o.row.id)},null,8,["onClick"])]),_:2},1032,["props"])]),"top-right":r(()=>[l(M,{icon:"autorenew",class:"cursor-pointer q-mx-sm",onClick:s,flat:""}),l(v,{modelValue:g.value,"onUpdate:modelValue":f[0]||(f[0]=o=>g.value=o),filled:"",dense:"",label:"Search",debounce:"300",color:"primary"},{append:r(()=>[l(D,{name:"search"})]),_:1},8,["modelValue"])]),_:1},8,["rows","columns","loading","dense"]),l(Ue,{"is-open":e.value,onOpenModal:V,"serial-and-mac":S(p),client:w.value,"close-modal":i},null,8,["is-open","serial-and-mac","client"]),l(ke,{"data-id":d.value,"get-subsribers":s},null,8,["data-id"])]),_:1}))}});export{Fe as default};
